"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var xs=_interopDefault(require("xstream")),React=require("react"),React__default=_interopDefault(React),reactDom=require("react-dom"),extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var adapt_1=createCommonjsModule(function(e,t){function r(){var e;return(e="undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:this).Cyclejs=e.Cyclejs||{},(e=e.Cyclejs).adaptStream=e.adaptStream||function(e){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.setAdapt=function(e){r().adaptStream=e},t.adapt=function(e){return r().adaptStream(e)}});unwrapExports(adapt_1);var adapt_2=adapt_1.setAdapt,adapt_3=adapt_1.adapt,__window="undefined"!=typeof window&&window,__self="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,__global=void 0!==commonjsGlobal&&commonjsGlobal,_root=__window||__global||__self,root_1=_root;!function(){if(!_root)throw new Error("RxJS could not find any global context (window, self, global)")}();var root={root:root_1};function isFunction(e){return"function"==typeof e}var isFunction_2=isFunction,isFunction_1={isFunction:isFunction_2},isArray_1=Array.isArray||function(e){return e&&"number"==typeof e.length},isArray={isArray:isArray_1};function isObject(e){return null!=e&&"object"==typeof e}var tryCatchTarget,isObject_2=isObject,isObject_1={isObject:isObject_2},errorObject_1={e:{}},errorObject={errorObject:errorObject_1};function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject.errorObject.e=e,errorObject.errorObject}}function tryCatch(e){return tryCatchTarget=e,tryCatcher}var tryCatch_2=tryCatch,tryCatch_1={tryCatch:tryCatch_2},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},UnsubscriptionError=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return __extends$1(t,e),t}(Error),UnsubscriptionError_2=UnsubscriptionError,UnsubscriptionError_1={UnsubscriptionError:UnsubscriptionError_2},Subscription=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,n=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,c=n?n.length:0;r;)r.remove(this),r=++s<c&&n[s]||null;if(isFunction_1.isFunction(o))tryCatch_1.tryCatch(o).call(this)===errorObject.errorObject&&(t=!0,e=e||(errorObject.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(errorObject.errorObject.e.errors):[errorObject.errorObject.e]));if(isArray.isArray(i))for(s=-1,c=i.length;++s<c;){var a=i[s];if(isObject_1.isObject(a))if(tryCatch_1.tryCatch(a.unsubscribe).call(a)===errorObject.errorObject){t=!0,e=e||[];var u=errorObject.errorObject.e;u instanceof UnsubscriptionError_1.UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(u.errors)):e.push(u)}}if(t)throw new UnsubscriptionError_1.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}(),Subscription_2=Subscription;function flattenUnsubscriptionErrors(e){return e.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError_1.UnsubscriptionError?t.errors:t)},[])}var Subscription_1={Subscription:Subscription_2},empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}},Observer={empty:empty},rxSubscriber=createCommonjsModule(function(e,t){var r=root.root.Symbol;t.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber}),rxSubscriber_1=rxSubscriber.rxSubscriber,rxSubscriber_2=rxSubscriber.$$rxSubscriber,__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Subscriber=function(e){function t(t,r,n){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer.empty;break;case 1:if(!t){this.destination=Observer.empty;break}if("object"==typeof t){if(isTrustedSubscriber(t)){var o=t[rxSubscriber.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,t,r,n)}}return __extends$2(t,e),t.prototype[rxSubscriber.rxSubscriber]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(Subscription_1.Subscription),Subscriber_2=Subscriber,SafeSubscriber=function(e){function t(t,r,n,o){var i;e.call(this),this._parentSubscriber=t;var s=this;isFunction_1.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==Observer.empty&&(s=Object.create(r),isFunction_1.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=o}return __extends$2(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Subscriber);function isTrustedSubscriber(e){return e instanceof Subscriber||"syncErrorThrowable"in e&&e[rxSubscriber.rxSubscriber]}var Subscriber_1={Subscriber:Subscriber_2};function toSubscriber(e,t,r){if(e){if(e instanceof Subscriber_1.Subscriber)return e;if(e[rxSubscriber.rxSubscriber])return e[rxSubscriber.rxSubscriber]()}return e||t||r?new Subscriber_1.Subscriber(e,t,r):new Subscriber_1.Subscriber(Observer.empty)}var toSubscriber_2=toSubscriber,toSubscriber_1={toSubscriber:toSubscriber_2},observable=createCommonjsModule(function(e,t){function r(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=r,t.observable=r(root.root),t.$$observable=t.observable}),observable_1=observable.getSymbolObservable,observable_2=observable.observable,observable_3=observable.$$observable;function noop(){}var noop_2=noop,noop_1={noop:noop_2};function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return pipeFromArray(e)}var pipe_2=pipe;function pipeFromArray(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:noop_1.noop}var pipeFromArray_1=pipeFromArray,pipe_1={pipe:pipe_2,pipeFromArray:pipeFromArray_1},Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=toSubscriber_1.toSubscriber(e,t,r);if(n?n.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(root.root.Rx&&root.root.Rx.config&&root.root.Rx.config.Promise?t=root.root.Rx.config.Promise:root.root.Promise&&(t=root.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var o;o=r.subscribe(function(t){if(o)try{e(t)}catch(e){n(e),o.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[observable.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:pipe_1.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(root.root.Rx&&root.root.Rx.config&&root.root.Rx.config.Promise?e=root.root.Rx.config.Promise:root.root.Promise&&(e=root.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}(),Observable_2=Observable,Observable_1={Observable:Observable_2},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ObjectUnsubscribedError=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return __extends$3(t,e),t}(Error),ObjectUnsubscribedError_2=ObjectUnsubscribedError,ObjectUnsubscribedError_1={ObjectUnsubscribedError:ObjectUnsubscribedError_2},__extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubjectSubscription=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return __extends$4(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(Subscription_1.Subscription),SubjectSubscription_2=SubjectSubscription,SubjectSubscription_1={SubjectSubscription:SubjectSubscription_2},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubjectSubscriber=function(e){function t(t){e.call(this,t),this.destination=t}return __extends$5(t,e),t}(Subscriber_1.Subscriber),SubjectSubscriber_1=SubjectSubscriber,Subject=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return __extends$5(t,e),t.prototype[rxSubscriber.rxSubscriber]=function(){return new SubjectSubscriber(this)},t.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(e.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription_1.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new Observable_1.Observable;return e.source=this,e},t.create=function(e,t){return new AnonymousSubject(e,t)},t}(Observable_1.Observable),Subject_2=Subject,AnonymousSubject=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return __extends$5(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription_1.Subscription.EMPTY},t}(Subject),AnonymousSubject_1=AnonymousSubject,Subject_1={SubjectSubscriber:SubjectSubscriber_1,Subject:Subject_2,AnonymousSubject:AnonymousSubject_1},__extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncSubject=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return __extends$6(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Subscription_1.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Subject_1.Subject),AsyncSubject_2=AsyncSubject,AsyncSubject_1={AsyncSubject:AsyncSubject_2},__extends$7=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BoundCallbackObservable=function(e){function t(t,r,n,o,i){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=o,this.scheduler=i}return __extends$7(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var o=[],i=0;i<arguments.length;i++)o[i-0]=arguments[i];return new t(e,r,o,this,n)}},t.prototype._subscribe=function(e){var r=this.callbackFunc,n=this.args,o=this.scheduler,i=this.subject;if(o)return o.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new AsyncSubject_1.AsyncSubject;var s=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,o=n.selector,i=n.subject;if(o){var s=tryCatch_1.tryCatch(o).apply(this,t);s===errorObject.errorObject?i.error(errorObject.errorObject.e):(i.next(s),i.complete())}else i.next(t.length<=1?t[0]:t),i.complete()};s.source=this,tryCatch_1.tryCatch(r).apply(this.context,n.concat(s))===errorObject.errorObject&&i.error(errorObject.errorObject.e)}return i.subscribe(e)},t.dispatch=function(e){var t=this,r=e.source,n=e.subscriber,o=e.context,i=r.callbackFunc,s=r.args,c=r.scheduler,a=r.subject;if(!a){a=r.subject=new AsyncSubject_1.AsyncSubject;var u=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var o=e.source,i=o.selector,s=o.subject;if(i){var a=tryCatch_1.tryCatch(i).apply(this,r);a===errorObject.errorObject?t.add(c.schedule(dispatchError,0,{err:errorObject.errorObject.e,subject:s})):t.add(c.schedule(dispatchNext,0,{value:a,subject:s}))}else{var u=r.length<=1?r[0]:r;t.add(c.schedule(dispatchNext,0,{value:u,subject:s}))}};u.source=r,tryCatch_1.tryCatch(i).apply(o,s.concat(u))===errorObject.errorObject&&a.error(errorObject.errorObject.e)}t.add(a.subscribe(n))},t}(Observable_1.Observable),BoundCallbackObservable_2=BoundCallbackObservable;function dispatchNext(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError(e){var t=e.err;e.subject.error(t)}var BoundCallbackObservable_1={BoundCallbackObservable:BoundCallbackObservable_2},bindCallback_1=BoundCallbackObservable_1.BoundCallbackObservable.create,bindCallback={bindCallback:bindCallback_1};Observable_1.Observable.bindCallback=bindCallback.bindCallback;var __extends$8=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BoundNodeCallbackObservable=function(e){function t(t,r,n,o,i){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=o,this.scheduler=i}return __extends$8(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var o=[],i=0;i<arguments.length;i++)o[i-0]=arguments[i];return new t(e,r,o,this,n)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,o=this.subject;if(n)return n.schedule(dispatch,0,{source:this,subscriber:e,context:this.context});if(!o){o=this.subject=new AsyncSubject_1.AsyncSubject;var i=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,o=n.selector,i=n.subject,s=t.shift();if(s)i.error(s);else if(o){var c=tryCatch_1.tryCatch(o).apply(this,t);c===errorObject.errorObject?i.error(errorObject.errorObject.e):(i.next(c),i.complete())}else i.next(t.length<=1?t[0]:t),i.complete()};i.source=this,tryCatch_1.tryCatch(t).apply(this.context,r.concat(i))===errorObject.errorObject&&o.error(errorObject.errorObject.e)}return o.subscribe(e)},t}(Observable_1.Observable),BoundNodeCallbackObservable_2=BoundNodeCallbackObservable;function dispatch(e){var t=this,r=e.source,n=e.subscriber,o=e.context,i=r,s=i.callbackFunc,c=i.args,a=i.scheduler,u=r.subject;if(!u){u=r.subject=new AsyncSubject_1.AsyncSubject;var l=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var o=e.source,i=o.selector,s=o.subject,c=r.shift();if(c)t.add(a.schedule(dispatchError$1,0,{err:c,subject:s}));else if(i){var u=tryCatch_1.tryCatch(i).apply(this,r);u===errorObject.errorObject?t.add(a.schedule(dispatchError$1,0,{err:errorObject.errorObject.e,subject:s})):t.add(a.schedule(dispatchNext$1,0,{value:u,subject:s}))}else{var l=r.length<=1?r[0]:r;t.add(a.schedule(dispatchNext$1,0,{value:l,subject:s}))}};l.source=r,tryCatch_1.tryCatch(s).apply(o,c.concat(l))===errorObject.errorObject&&t.add(a.schedule(dispatchError$1,0,{err:errorObject.errorObject.e,subject:u}))}t.add(u.subscribe(n))}function dispatchNext$1(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError$1(e){var t=e.err;e.subject.error(t)}var BoundNodeCallbackObservable_1={BoundNodeCallbackObservable:BoundNodeCallbackObservable_2},bindNodeCallback_1=BoundNodeCallbackObservable_1.BoundNodeCallbackObservable.create,bindNodeCallback={bindNodeCallback:bindNodeCallback_1};function isScheduler(e){return e&&"function"==typeof e.schedule}Observable_1.Observable.bindNodeCallback=bindNodeCallback.bindNodeCallback;var isScheduler_2=isScheduler,isScheduler_1={isScheduler:isScheduler_2},__extends$9=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ScalarObservable=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return __extends$9(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(Observable_1.Observable),ScalarObservable_2=ScalarObservable,ScalarObservable_1={ScalarObservable:ScalarObservable_2},__extends$10=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},EmptyObservable=function(e){function t(t){e.call(this),this.scheduler=t}return __extends$10(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(Observable_1.Observable),EmptyObservable_2=EmptyObservable,EmptyObservable_1={EmptyObservable:EmptyObservable_2},__extends$11=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArrayObservable=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return __extends$11(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];isScheduler_1.isScheduler(n)?e.pop():n=null;var o=e.length;return o>1?new t(e,n):1===o?new ScalarObservable_1.ScalarObservable(e[0],n):new EmptyObservable_1.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,o=e.subscriber;r>=n?o.complete():(o.next(t[r]),o.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var i=0;i<n&&!e.closed;i++)e.next(r[i]);e.complete()},t}(Observable_1.Observable),ArrayObservable_2=ArrayObservable,ArrayObservable_1={ArrayObservable:ArrayObservable_2},__extends$12=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},OuterSubscriber=function(e){function t(){e.apply(this,arguments)}return __extends$12(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber_1.Subscriber),OuterSubscriber_2=OuterSubscriber,OuterSubscriber_1={OuterSubscriber:OuterSubscriber_2},isArrayLike_1=function(e){return e&&"number"==typeof e.length},isArrayLike={isArrayLike:isArrayLike_1};function isPromise(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var isPromise_2=isPromise,isPromise_1={isPromise:isPromise_2},iterator=createCommonjsModule(function(e,t){function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}t.symbolIteratorPonyfill=r,t.iterator=r(root.root),t.$$iterator=t.iterator}),iterator_1=iterator.symbolIteratorPonyfill,iterator_2=iterator.iterator,iterator_3=iterator.$$iterator,__extends$13=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},InnerSubscriber=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return __extends$13(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Subscriber_1.Subscriber),InnerSubscriber_2=InnerSubscriber,InnerSubscriber_1={InnerSubscriber:InnerSubscriber_2};function subscribeToResult(e,t,r,n){var o=new InnerSubscriber_1.InnerSubscriber(e,r,n);if(o.closed)return null;if(t instanceof Observable_1.Observable)return t._isScalar?(o.next(t.value),o.complete(),null):(o.syncErrorThrowable=!0,t.subscribe(o));if(isArrayLike.isArrayLike(t)){for(var i=0,s=t.length;i<s&&!o.closed;i++)o.next(t[i]);o.closed||o.complete()}else{if(isPromise_1.isPromise(t))return t.then(function(e){o.closed||(o.next(e),o.complete())},function(e){return o.error(e)}).then(null,function(e){root.root.setTimeout(function(){throw e})}),o;if(t&&"function"==typeof t[iterator.iterator])for(var c=t[iterator.iterator]();;){var a=c.next();if(a.done){o.complete();break}if(o.next(a.value),o.closed)break}else if(t&&"function"==typeof t[observable.observable]){var u=t[observable.observable]();if("function"==typeof u.subscribe)return u.subscribe(new InnerSubscriber_1.InnerSubscriber(e,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var l="You provided "+(isObject_1.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(l))}}return null}var subscribeToResult_2=subscribeToResult,subscribeToResult_1={subscribeToResult:subscribeToResult_2},__extends$14=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},none={};function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new ArrayObservable_1.ArrayObservable([t].concat(e)),new CombineLatestOperator(r))}}var combineLatest_2=combineLatest,CombineLatestOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new CombineLatestSubscriber(e,this.project))},e}(),CombineLatestOperator_1=CombineLatestOperator,CombineLatestSubscriber=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return __extends$14(t,e),t.prototype._next=function(e){this.values.push(none),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(subscribeToResult_1.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.values,s=i[r],c=this.toRespond?s===none?--this.toRespond:this.toRespond:0;i[r]=t,0===c&&(this.project?this._tryProject(i):this.destination.next(i.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),CombineLatestSubscriber_1=CombineLatestSubscriber,combineLatest_1={combineLatest:combineLatest_2,CombineLatestOperator:CombineLatestOperator_1,CombineLatestSubscriber:CombineLatestSubscriber_1};function combineLatest$1(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,n=null;return isScheduler_1.isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0]),new ArrayObservable_1.ArrayObservable(e,n).lift(new combineLatest_1.CombineLatestOperator(r))}var combineLatest_3=combineLatest$1,combineLatest_2$1={combineLatest:combineLatest_3};Observable_1.Observable.combineLatest=combineLatest_2$1.combineLatest;var of_1=ArrayObservable_1.ArrayObservable.of,of={of:of_1},__extends$15=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},PromiseObservable=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return __extends$15(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){root.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return n.schedule(dispatchNext$2,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(dispatchNext$2,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(n.schedule(dispatchError$2,0,{err:t,subscriber:e}))}).then(null,function(e){root.root.setTimeout(function(){throw e})})},t}(Observable_1.Observable),PromiseObservable_2=PromiseObservable;function dispatchNext$2(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function dispatchError$2(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}var PromiseObservable_1={PromiseObservable:PromiseObservable_2},__extends$16=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IteratorObservable=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=getIterator(t)}return __extends$16(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,o=e.subscriber;if(r)o.error(e.error);else{var i=n.next();i.done?o.complete():(o.next(i.value),e.index=t+1,o.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var o=r.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(Observable_1.Observable),IteratorObservable_2=IteratorObservable,StringIterator=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),ArrayIterator=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=toLength(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();function getIterator(e){var t=e[iterator.iterator];if(!t&&"string"==typeof e)return new StringIterator(e);if(!t&&void 0!==e.length)return new ArrayIterator(e);if(!t)throw new TypeError("object is not iterable");return e[iterator.iterator]()}var maxSafeInteger=Math.pow(2,53)-1;function toLength(e){var t=+e.length;return isNaN(t)?0:0!==t&&numberIsFinite(t)?(t=sign(t)*Math.floor(Math.abs(t)))<=0?0:t>maxSafeInteger?maxSafeInteger:t:t}function numberIsFinite(e){return"number"==typeof e&&root.root.isFinite(e)}function sign(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}var IteratorObservable_1={IteratorObservable:IteratorObservable_2},__extends$17=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArrayLikeObservable=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return __extends$17(t,e),t.create=function(e,r){var n=e.length;return 0===n?new EmptyObservable_1.EmptyObservable:1===n?new ScalarObservable_1.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,o=e.subscriber;o.closed||(r>=n?o.complete():(o.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,o=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:o,subscriber:e});for(var i=0;i<o&&!e.closed;i++)e.next(r[i]);e.complete()},t}(Observable_1.Observable),ArrayLikeObservable_2=ArrayLikeObservable,ArrayLikeObservable_1={ArrayLikeObservable:ArrayLikeObservable_2},Notification=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Observable_1.Observable.of(this.value);case"E":return Observable_1.Observable.throw(this.error);case"C":return Observable_1.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Notification_2=Notification,Notification_1={Notification:Notification_2},__extends$18=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function observeOn(e,t){return void 0===t&&(t=0),function(r){return r.lift(new ObserveOnOperator(e,t))}}var observeOn_2=observeOn,ObserveOnOperator=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new ObserveOnSubscriber(e,this.scheduler,this.delay))},e}(),ObserveOnOperator_1=ObserveOnOperator,ObserveOnSubscriber=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return __extends$18(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification_1.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete())},t}(Subscriber_1.Subscriber),ObserveOnSubscriber_1=ObserveOnSubscriber,ObserveOnMessage=function(){return function(e,t){this.notification=e,this.destination=t}}(),ObserveOnMessage_1=ObserveOnMessage,observeOn_1={observeOn:observeOn_2,ObserveOnOperator:ObserveOnOperator_1,ObserveOnSubscriber:ObserveOnSubscriber_1,ObserveOnMessage:ObserveOnMessage_1},__extends$19=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},FromObservable=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return __extends$19(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[observable.observable])return e instanceof Observable_1.Observable&&!r?e:new t(e,r);if(isArray.isArray(e))return new ArrayObservable_1.ArrayObservable(e,r);if(isPromise_1.isPromise(e))return new PromiseObservable_1.PromiseObservable(e,r);if("function"==typeof e[iterator.iterator]||"string"==typeof e)return new IteratorObservable_1.IteratorObservable(e,r);if(isArrayLike.isArrayLike(e))return new ArrayLikeObservable_1.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[observable.observable]().subscribe(e):t[observable.observable]().subscribe(new observeOn_1.ObserveOnSubscriber(e,r,0))},t}(Observable_1.Observable),FromObservable_2=FromObservable,FromObservable_1={FromObservable:FromObservable_2},from_1=FromObservable_1.FromObservable.create,from={from:from_1},__extends$20=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof t&&(r=t,t=null),n.lift(new MergeMapOperator(e,t,r))}}var mergeMap_2=mergeMap,MergeMapOperator=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapSubscriber(e,this.project,this.resultSelector,this.concurrent))},e}(),MergeMapOperator_1=MergeMapOperator,MergeMapSubscriber=function(e){function t(t,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$20(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var o;try{o=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(o)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),MergeMapSubscriber_1=MergeMapSubscriber,mergeMap_1={mergeMap:mergeMap_2,MergeMapOperator:MergeMapOperator_1,MergeMapSubscriber:MergeMapSubscriber_1};function identity(e){return e}var identity_2=identity,identity_1={identity:identity_2};function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeMap_1.mergeMap(identity_1.identity,null,e)}var mergeAll_2=mergeAll,mergeAll_1={mergeAll:mergeAll_2};function concatAll(){return mergeAll_1.mergeAll(1)}var concatAll_2=concatAll,concatAll_1={concatAll:concatAll_2};function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&isScheduler_1.isScheduler(e[1])?from.from(e[0]):concatAll_1.concatAll()(of.of.apply(void 0,e))}var concat_2=concat,concat_1={concat:concat_2};Observable_1.Observable.concat=concat_1.concat;var __extends$21=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},DeferObservable=function(e){function t(t){e.call(this),this.observableFactory=t}return __extends$21(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new DeferSubscriber(e,this.observableFactory)},t}(Observable_1.Observable),DeferObservable_2=DeferObservable,DeferSubscriber=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return __extends$21(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(subscribeToResult_1.subscribeToResult(this,e))},t}(OuterSubscriber_1.OuterSubscriber),DeferObservable_1={DeferObservable:DeferObservable_2},defer_1=DeferObservable_1.DeferObservable.create,defer={defer:defer_1};Observable_1.Observable.defer=defer.defer;var empty_1=EmptyObservable_1.EmptyObservable.create,empty$1={empty:empty_1};Observable_1.Observable.empty=empty$1.empty;var __extends$22=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ForkJoinObservable=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return __extends$22(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0]),0===e.length?new EmptyObservable_1.EmptyObservable:new t(e,n)},t.prototype._subscribe=function(e){return new ForkJoinSubscriber(e,this.sources,this.resultSelector)},t}(Observable_1.Observable),ForkJoinObservable_2=ForkJoinObservable,ForkJoinSubscriber=function(e){function t(t,r,n){e.call(this,t),this.sources=r,this.resultSelector=n,this.completed=0,this.haveValues=0;var o=r.length;this.total=o,this.values=new Array(o);for(var i=0;i<o;i++){var s=r[i],c=subscribeToResult_1.subscribeToResult(this,s,null,i);c&&(c.outerIndex=i,this.add(c))}}return __extends$22(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values[r]=t,o._hasValue||(o._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this.haveValues,n=this.resultSelector,o=this.values,i=o.length;if(e._hasValue){if(this.completed++,this.completed===i){if(r===i){var s=n?n.apply(this,o):o;t.next(s)}t.complete()}}else t.complete()},t}(OuterSubscriber_1.OuterSubscriber),ForkJoinObservable_1={ForkJoinObservable:ForkJoinObservable_2},forkJoin_1=ForkJoinObservable_1.ForkJoinObservable.create,forkJoin={forkJoin:forkJoin_1};Observable_1.Observable.forkJoin=forkJoin.forkJoin,Observable_1.Observable.from=from.from;var __extends$23=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},toString=Object.prototype.toString;function isNodeStyleEventEmitter(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function isNodeList(e){return!!e&&"[object NodeList]"===toString.call(e)}function isHTMLCollection(e){return!!e&&"[object HTMLCollection]"===toString.call(e)}function isEventTarget(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var FromEventObservable=function(e){function t(t,r,n,o){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=o}return __extends$23(t,e),t.create=function(e,r,n,o){return isFunction_1.isFunction(n)&&(o=n,n=void 0),new t(e,r,o,n)},t.setupSubscription=function(e,r,n,o,i){var s;if(isNodeList(e)||isHTMLCollection(e))for(var c=0,a=e.length;c<a;c++)t.setupSubscription(e[c],r,n,o,i);else if(isEventTarget(e)){var u=e;e.addEventListener(r,n,i),s=function(){return u.removeEventListener(r,n,i)}}else if(isJQueryStyleEventEmitter(e)){var l=e;e.on(r,n),s=function(){return l.off(r,n)}}else{if(!isNodeStyleEventEmitter(e))throw new TypeError("Invalid event target");var p=e;e.addListener(r,n),s=function(){return p.removeListener(r,n)}}o.add(new Subscription_1.Subscription(s))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,o=this.options,i=this.selector,s=i?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=tryCatch_1.tryCatch(i).apply(void 0,t);n===errorObject.errorObject?e.error(errorObject.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,s,e,o)},t}(Observable_1.Observable),FromEventObservable_2=FromEventObservable,FromEventObservable_1={FromEventObservable:FromEventObservable_2},fromEvent_1=FromEventObservable_1.FromEventObservable.create,fromEvent={fromEvent:fromEvent_1};Observable_1.Observable.fromEvent=fromEvent.fromEvent;var __extends$24=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},FromEventPatternObservable=function(e){function t(t,r,n){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=n}return __extends$24(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];t._callSelector(e,r)}:function(t){e.next(t)},o=this._callAddHandler(n,e);isFunction_1.isFunction(r)&&e.add(new Subscription_1.Subscription(function(){r(n,o)}))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(Observable_1.Observable),FromEventPatternObservable_2=FromEventPatternObservable,FromEventPatternObservable_1={FromEventPatternObservable:FromEventPatternObservable_2},fromEventPattern_1=FromEventPatternObservable_1.FromEventPatternObservable.create,fromEventPattern={fromEventPattern:fromEventPattern_1};Observable_1.Observable.fromEventPattern=fromEventPattern.fromEventPattern;var fromPromise_1=PromiseObservable_1.PromiseObservable.create,fromPromise={fromPromise:fromPromise_1};Observable_1.Observable.fromPromise=fromPromise.fromPromise;var __extends$25=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},selfSelector=function(e){return e},GenerateObservable=function(e){function t(t,r,n,o,i){e.call(this),this.initialState=t,this.condition=r,this.iterate=n,this.resultSelector=o,this.scheduler=i}return __extends$25(t,e),t.create=function(e,r,n,o,i){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||selfSelector,e.scheduler):void 0===o||isScheduler_1.isScheduler(o)?new t(e,r,n,selfSelector,o):new t(e,r,n,o,i)},t.prototype._subscribe=function(e){var r=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:r});for(var n=this.condition,o=this.resultSelector,i=this.iterate;;){if(n){var s=void 0;try{s=n(r)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var c=void 0;try{c=o(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=i(r)}catch(t){return void e.error(t)}}},t.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var o;try{o=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(o),!t.closed))return this.schedule(e)}},t}(Observable_1.Observable),GenerateObservable_2=GenerateObservable,GenerateObservable_1={GenerateObservable:GenerateObservable_2},generate_1=GenerateObservable_1.GenerateObservable.create,generate={generate:generate_1};Observable_1.Observable.generate=generate.generate;var __extends$26=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IfObservable=function(e){function t(t,r,n){e.call(this),this.condition=t,this.thenSource=r,this.elseSource=n}return __extends$26(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this.condition,r=this.thenSource,n=this.elseSource;return new IfSubscriber(e,t,r,n)},t}(Observable_1.Observable),IfObservable_2=IfObservable,IfSubscriber=function(e){function t(t,r,n,o){e.call(this,t),this.condition=r,this.thenSource=n,this.elseSource=o,this.tryIf()}return __extends$26(t,e),t.prototype.tryIf=function(){var e=this.condition,t=this.thenSource,r=this.elseSource;try{var n=e()?t:r;n?this.add(subscribeToResult_1.subscribeToResult(this,n)):this._complete()}catch(e){this._error(e)}},t}(OuterSubscriber_1.OuterSubscriber),IfObservable_1={IfObservable:IfObservable_2},_if_1=IfObservable_1.IfObservable.create,_if={_if:_if_1};function isNumeric(e){return!isArray.isArray(e)&&e-parseFloat(e)+1>=0}Observable_1.Observable.if=_if._if;var isNumeric_2=isNumeric,isNumeric_1={isNumeric:isNumeric_2},__extends$27=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Action=function(e){function t(t,r){e.call(this)}return __extends$27(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Subscription_1.Subscription),Action_2=Action,Action_1={Action:Action_2},__extends$28=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return __extends$28(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),root.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;root.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(Action_1.Action),AsyncAction_2=AsyncAction,AsyncAction_1={AsyncAction:AsyncAction_2},Scheduler=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}(),Scheduler_2=Scheduler,Scheduler_1={Scheduler:Scheduler_2},__extends$29=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncScheduler=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return __extends$29(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Scheduler_1.Scheduler),AsyncScheduler_2=AsyncScheduler,AsyncScheduler_1={AsyncScheduler:AsyncScheduler_2},async_1=new AsyncScheduler_1.AsyncScheduler(AsyncAction_1.AsyncAction),async={async:async_1},__extends$30=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IntervalObservable=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=async.async),e.call(this),this.period=t,this.scheduler=r,(!isNumeric_1.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=async.async)}return __extends$30(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=async.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(Observable_1.Observable),IntervalObservable_2=IntervalObservable,IntervalObservable_1={IntervalObservable:IntervalObservable_2},interval_1=IntervalObservable_1.IntervalObservable.create,interval={interval:interval_1};function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,o=e[e.length-1];return isScheduler_1.isScheduler(o)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof Observable_1.Observable?e[0]:mergeAll_1.mergeAll(r)(new ArrayObservable_1.ArrayObservable(e,n))}Observable_1.Observable.interval=interval.interval;var merge_2=merge,merge_1={merge:merge_2};Observable_1.Observable.merge=merge_1.merge;var __extends$31=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function race(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!isArray.isArray(e[0]))return e[0];e=e[0]}return new ArrayObservable_1.ArrayObservable(e).lift(new RaceOperator)}var race_2=race,RaceOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new RaceSubscriber(e))},e}(),RaceOperator_1=RaceOperator,RaceSubscriber=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends$31(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],o=subscribeToResult_1.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==r){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),RaceSubscriber_1=RaceSubscriber,race_1={race:race_2,RaceOperator:RaceOperator_1,RaceSubscriber:RaceSubscriber_1};Observable_1.Observable.race=race_1.race;var __extends$32=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},NeverObservable=function(e){function t(){e.call(this)}return __extends$32(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){noop_1.noop()},t}(Observable_1.Observable),NeverObservable_2=NeverObservable,NeverObservable_1={NeverObservable:NeverObservable_2},never_1=NeverObservable_1.NeverObservable.create,never={never:never_1};Observable_1.Observable.never=never.never,Observable_1.Observable.of=of.of;var __extends$33=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new OnErrorResumeNextOperator(e))}}var onErrorResumeNext_2=onErrorResumeNext;function onErrorResumeNextStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r;return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),r=e.shift(),new FromObservable_1.FromObservable(r,null).lift(new OnErrorResumeNextOperator(e))}var onErrorResumeNextStatic_1=onErrorResumeNextStatic,OnErrorResumeNextOperator=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new OnErrorResumeNextSubscriber(e,this.nextSources))},e}(),OnErrorResumeNextSubscriber=function(e){function t(t,r){e.call(this,t),this.destination=t,this.nextSources=r}return __extends$33(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(subscribeToResult_1.subscribeToResult(this,e)):this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),onErrorResumeNext_1={onErrorResumeNext:onErrorResumeNext_2,onErrorResumeNextStatic:onErrorResumeNextStatic_1},onErrorResumeNext_2$1=onErrorResumeNext_1.onErrorResumeNextStatic,onErrorResumeNext$1={onErrorResumeNext:onErrorResumeNext_2$1};Observable_1.Observable.onErrorResumeNext=onErrorResumeNext$1.onErrorResumeNext;var __extends$34=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function dispatch$1(e){var t=e.obj,r=e.keys,n=e.length,o=e.index,i=e.subscriber;if(o!==n){var s=r[o];i.next([s,t[s]]),e.index=o+1,this.schedule(e)}else i.complete()}var PairsObservable=function(e){function t(t,r){e.call(this),this.obj=t,this.scheduler=r,this.keys=Object.keys(t)}return __extends$34(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this.keys,r=this.scheduler,n=t.length;if(r)return r.schedule(dispatch$1,0,{obj:this.obj,keys:t,length:n,index:0,subscriber:e});for(var o=0;o<n;o++){var i=t[o];e.next([i,this.obj[i]])}e.complete()},t}(Observable_1.Observable),PairsObservable_2=PairsObservable,PairsObservable_1={PairsObservable:PairsObservable_2},pairs_1=PairsObservable_1.PairsObservable.create,pairs={pairs:pairs_1};Observable_1.Observable.pairs=pairs.pairs;var __extends$35=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},RangeObservable=function(e){function t(t,r,n){e.call(this),this.start=t,this._count=r,this.scheduler=n}return __extends$35(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,n)},t.dispatch=function(e){var t=e.start,r=e.index,n=e.count,o=e.subscriber;r>=n?o.complete():(o.next(t),o.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=0,n=this.start,o=this._count,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{index:r,count:o,start:n,subscriber:e});for(;;){if(r++>=o){e.complete();break}if(e.next(n++),e.closed)break}},t}(Observable_1.Observable),RangeObservable_2=RangeObservable,RangeObservable_1={RangeObservable:RangeObservable_2},range_1=RangeObservable_1.RangeObservable.create,range={range:range_1};Observable_1.Observable.range=range.range;var __extends$36=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},UsingObservable=function(e){function t(t,r){e.call(this),this.resourceFactory=t,this.observableFactory=r}return __extends$36(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t,r=this.resourceFactory,n=this.observableFactory;try{return t=r(),new UsingSubscriber(e,t,n)}catch(t){e.error(t)}},t}(Observable_1.Observable),UsingObservable_2=UsingObservable,UsingSubscriber=function(e){function t(t,r,n){e.call(this,t),this.resource=r,this.observableFactory=n,t.add(r),this.tryUse()}return __extends$36(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(subscribeToResult_1.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(OuterSubscriber_1.OuterSubscriber),UsingObservable_1={UsingObservable:UsingObservable_2},using_1=UsingObservable_1.UsingObservable.create,using={using:using_1};Observable_1.Observable.using=using.using;var __extends$37=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ErrorObservable=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return __extends$37(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,n=this.scheduler;if(e.syncErrorThrowable=!0,n)return n.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(Observable_1.Observable),ErrorObservable_2=ErrorObservable,ErrorObservable_1={ErrorObservable:ErrorObservable_2},_throw_1=ErrorObservable_1.ErrorObservable.create,_throw={_throw:_throw_1};function isDate(e){return e instanceof Date&&!isNaN(+e)}Observable_1.Observable.throw=_throw._throw;var isDate_2=isDate,isDate_1={isDate:isDate_2},__extends$38=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},TimerObservable=function(e){function t(t,r,n){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,isNumeric_1.isNumeric(r)?this.period=Number(r)<1?1:Number(r):isScheduler_1.isScheduler(r)&&(n=r),isScheduler_1.isScheduler(n)||(n=async.async),this.scheduler=n,this.dueTime=isDate_1.isDate(t)?+t-this.scheduler.now():t}return __extends$38(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),new t(e,r,n)},t.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},t.prototype._subscribe=function(e){var r=this.period,n=this.dueTime;return this.scheduler.schedule(t.dispatch,n,{index:0,period:r,subscriber:e})},t}(Observable_1.Observable),TimerObservable_2=TimerObservable,TimerObservable_1={TimerObservable:TimerObservable_2},timer_1=TimerObservable_1.TimerObservable.create,timer={timer:timer_1};Observable_1.Observable.timer=timer.timer;var __extends$39=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function zip(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(zipStatic.apply(void 0,[t].concat(e)))}}var zip_2=zip;function zipStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new ArrayObservable_1.ArrayObservable(e).lift(new ZipOperator(r))}var zipStatic_1=zipStatic,ZipOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new ZipSubscriber(e,this.project))},e}(),ZipOperator_1=ZipOperator,ZipSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return __extends$39(t,e),t.prototype._next=function(e){var t=this.iterators;isArray.isArray(e)?t.push(new StaticArrayIterator(e)):"function"==typeof e[iterator.iterator]?t.push(new StaticIterator(e[iterator.iterator]())):t.push(new ZipBufferIterator(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var o=!1,i=[];for(n=0;n<t;n++){var s,c=(s=e[n]).next();if(s.hasCompleted()&&(o=!0),c.done)return void r.complete();i.push(c.value)}this.project?this._tryProject(i):r.next(i),o&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber_1.Subscriber),ZipSubscriber_1=ZipSubscriber,StaticIterator=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),StaticArrayIterator=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ZipBufferIterator=function(e){function t(t,r,n){e.call(this,t),this.parent=r,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return __extends$39(t,e),t.prototype[iterator.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return subscribeToResult_1.subscribeToResult(this,this.observable,this,t)},t}(OuterSubscriber_1.OuterSubscriber),zip_1={zip:zip_2,zipStatic:zipStatic_1,ZipOperator:ZipOperator_1,ZipSubscriber:ZipSubscriber_1},zip_2$1=zip_1.zipStatic,zip$1={zip:zip_2$1};Observable_1.Observable.zip=zip$1.zip;var __extends$40=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function map(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new MapOperator(e,t))}}var map_2=map,MapOperator=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},e}(),MapOperator_1=MapOperator,MapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return __extends$40(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber_1.Subscriber),map_1={map:map_2,MapOperator:MapOperator_1},__extends$41=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function getCORSRequest(){if(root.root.XMLHttpRequest)return new root.root.XMLHttpRequest;if(root.root.XDomainRequest)return new root.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function getXMLHttpRequest(){if(root.root.XMLHttpRequest)return new root.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new root.root.ActiveXObject(e))break}catch(e){}return new root.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}function ajaxGet(e,t){return void 0===t&&(t=null),new AjaxObservable({method:"GET",url:e,headers:t})}var ajaxGet_1=ajaxGet;function ajaxPost(e,t,r){return new AjaxObservable({method:"POST",url:e,body:t,headers:r})}var ajaxPost_1=ajaxPost;function ajaxDelete(e,t){return new AjaxObservable({method:"DELETE",url:e,headers:t})}var ajaxDelete_1=ajaxDelete;function ajaxPut(e,t,r){return new AjaxObservable({method:"PUT",url:e,body:t,headers:r})}var ajaxPut_1=ajaxPut;function ajaxPatch(e,t,r){return new AjaxObservable({method:"PATCH",url:e,body:t,headers:r})}var ajaxPatch_1=ajaxPatch,mapResponse=map_1.map(function(e,t){return e.response});function ajaxGetJSON(e,t){return mapResponse(new AjaxObservable({method:"GET",url:e,responseType:"json",headers:t}))}var ajaxGetJSON_1=ajaxGetJSON,AjaxObservable=function(e){function t(t){e.call(this);var r={async:!0,createXHR:function(){return this.crossDomain?getCORSRequest.call(this):getXMLHttpRequest()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);this.request=r}var r;return __extends$41(t,e),t.prototype._subscribe=function(e){return new AjaxSubscriber(e,this.request)},t.create=((r=function(e){return new t(e)}).get=ajaxGet,r.post=ajaxPost,r.delete=ajaxDelete,r.put=ajaxPut,r.patch=ajaxPatch,r.getJSON=ajaxGetJSON,r),t}(Observable_1.Observable),AjaxObservable_2=AjaxObservable,AjaxSubscriber=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var n=r.headers=r.headers||{};r.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in n||root.root.FormData&&r.body instanceof root.root.FormData||void 0===r.body||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.send()}return __extends$41(t,e),t.prototype.next=function(e){this.done=!0;var t=this.xhr,r=this.request,n=this.destination,o=new AjaxResponse(e,t,r);n.next(o)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,o=t.url,i=t.async,s=t.password,c=t.headers,a=t.body,u=e.createXHR,l=tryCatch_1.tryCatch(u).call(e);if(l===errorObject.errorObject)this.error(errorObject.errorObject.e);else{this.xhr=l,this.setupEvents(l,e);if((r?tryCatch_1.tryCatch(l.open).call(l,n,o,i,r,s):tryCatch_1.tryCatch(l.open).call(l,n,o,i))===errorObject.errorObject)return this.error(errorObject.errorObject.e),null;if(i&&(l.timeout=e.timeout,l.responseType=e.responseType),"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),this.setHeaders(l,c),(a?tryCatch_1.tryCatch(l.send).call(l,a):tryCatch_1.tryCatch(l.send).call(l))===errorObject.errorObject)return this.error(errorObject.errorObject.e),null}return l},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(root.root.FormData&&e instanceof root.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function n(e){var t=n,r=t.subscriber,o=t.progressSubscriber,i=t.request;o&&o.error(e),r.error(new AjaxTimeoutError(this,i))}if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=r,e.upload&&"withCredentials"in e){var o,i;if(r)o=function(e){o.progressSubscriber.next(e)},root.root.XDomainRequest?e.onprogress=o:e.upload.onprogress=o,o.progressSubscriber=r;i=function(e){var t=i,r=t.progressSubscriber,n=t.subscriber,o=t.request;r&&r.error(e),n.error(new AjaxError("ajax error",this,o))},e.onerror=i,i.request=t,i.subscriber=this,i.progressSubscriber=r}function s(e){var t=s,r=t.subscriber,n=t.progressSubscriber,o=t.request;if(4===this.readyState){var i=1223===this.status?204:this.status,c="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=c?200:0),200<=i&&i<300?(n&&n.complete(),r.next(e),r.complete()):(n&&n.error(e),r.error(new AjaxError("ajax error "+i,this,o)))}}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=r,s.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(Subscriber_1.Subscriber),AjaxSubscriber_1=AjaxSubscriber,AjaxResponse=function(){return function(e,t,r){this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=parseXhrResponse(this.responseType,t)}}(),AjaxResponse_1=AjaxResponse,AjaxError=function(e){function t(t,r,n){e.call(this,t),this.message=t,this.xhr=r,this.request=n,this.status=r.status,this.responseType=r.responseType||n.responseType,this.response=parseXhrResponse(this.responseType,r)}return __extends$41(t,e),t}(Error),AjaxError_1=AjaxError;function parseXhrResponse(e,t){switch(e){case"json":return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");case"xml":return t.responseXML;case"text":default:return"response"in t?t.response:t.responseText}}var AjaxTimeoutError=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return __extends$41(t,e),t}(AjaxError),AjaxTimeoutError_1=AjaxTimeoutError,AjaxObservable_1={ajaxGet:ajaxGet_1,ajaxPost:ajaxPost_1,ajaxDelete:ajaxDelete_1,ajaxPut:ajaxPut_1,ajaxPatch:ajaxPatch_1,ajaxGetJSON:ajaxGetJSON_1,AjaxObservable:AjaxObservable_2,AjaxSubscriber:AjaxSubscriber_1,AjaxResponse:AjaxResponse_1,AjaxError:AjaxError_1,AjaxTimeoutError:AjaxTimeoutError_1},ajax_1=AjaxObservable_1.AjaxObservable.create,ajax={ajax:ajax_1};Observable_1.Observable.ajax=ajax.ajax;var __extends$42=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},QueueAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$42(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(AsyncAction_1.AsyncAction),QueueAction_2=QueueAction,QueueAction_1={QueueAction:QueueAction_2},__extends$43=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},QueueScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$43(t,e),t}(AsyncScheduler_1.AsyncScheduler),QueueScheduler_2=QueueScheduler,QueueScheduler_1={QueueScheduler:QueueScheduler_2},queue_1=new QueueScheduler_1.QueueScheduler(QueueAction_1.QueueAction),queue={queue:queue_1},__extends$44=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReplaySubject=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return __extends$44(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new ReplayEvent(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError?t=Subscription_1.Subscription.EMPTY:this.isStopped?t=Subscription_1.Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription_1.SubjectSubscription(this,e)),n&&e.add(e=new observeOn_1.ObserveOnSubscriber(e,n));for(var o=r.length,i=0;i<o&&!e.closed;i++)e.next(r[i].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||queue.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,o=n.length,i=0;i<o&&!(e-n[i].time<r);)i++;return o>t&&(i=Math.max(i,o-t)),i>0&&n.splice(0,i),n},t}(Subject_1.Subject),ReplaySubject_2=ReplaySubject,ReplayEvent=function(){return function(e,t){this.time=e,this.value=t}}(),ReplaySubject_1={ReplaySubject:ReplaySubject_2};function assignImpl(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t.length,o=0;o<n;o++){var i=t[o];for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e}var assignImpl_1=assignImpl;function getAssign(e){return e.Object.assign||assignImpl}var getAssign_1=getAssign,assign_1=getAssign(root.root),assign={assignImpl:assignImpl_1,getAssign:getAssign_1,assign:assign_1},__extends$45=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},WebSocketSubject=function(e){function t(t,r){if(t instanceof Observable_1.Observable)e.call(this,r,t);else{if(e.call(this),this.WebSocketCtor=root.root.WebSocket,this._output=new Subject_1.Subject,"string"==typeof t?this.url=t:assign.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new ReplaySubject_1.ReplaySubject}}return __extends$45(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var r=new t(this,this.destination);return r.operator=e,r},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new ReplaySubject_1.ReplaySubject),this._output=new Subject_1.Subject},t.prototype.multiplex=function(e,t,r){var n=this;return new Observable_1.Observable(function(o){var i=tryCatch_1.tryCatch(e)();i===errorObject.errorObject?o.error(errorObject.errorObject.e):n.next(i);var s=n.subscribe(function(e){var t=tryCatch_1.tryCatch(r)(e);t===errorObject.errorObject?o.error(errorObject.errorObject.e):t&&o.next(e)},function(e){return o.error(e)},function(){return o.complete()});return function(){var e=tryCatch_1.tryCatch(t)();e===errorObject.errorObject?o.error(errorObject.errorObject.e):n.next(e),s.unsubscribe()}})},t.prototype._connectSocket=function(){var e=this,t=this.WebSocketCtor,r=this._output,n=null;try{n=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=n,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(e){return void r.error(e)}var o=new Subscription_1.Subscription(function(){e.socket=null,n&&1===n.readyState&&n.close()});n.onopen=function(t){var i=e.openObserver;i&&i.next(t);var s=e.destination;e.destination=Subscriber_1.Subscriber.create(function(e){return 1===n.readyState&&n.send(e)},function(t){var o=e.closingObserver;o&&o.next(void 0),t&&t.code?n.close(t.code,t.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()},function(){var t=e.closingObserver;t&&t.next(void 0),n.close(),e._resetState()}),s&&s instanceof ReplaySubject_1.ReplaySubject&&o.add(s.subscribe(e.destination))},n.onerror=function(t){e._resetState(),r.error(t)},n.onclose=function(t){e._resetState();var n=e.closeObserver;n&&n.next(t),t.wasClean?r.complete():r.error(t)},n.onmessage=function(t){var n=tryCatch_1.tryCatch(e.resultSelector)(t);n===errorObject.errorObject?r.error(errorObject.errorObject.e):r.next(n)}},t.prototype._subscribe=function(e){var t=this,r=this.source;if(r)return r.subscribe(e);this.socket||this._connectSocket();var n=new Subscription_1.Subscription;return n.add(this._output.subscribe(e)),n.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),n},t.prototype.unsubscribe=function(){var t=this.source,r=this.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),t||(this.destination=new ReplaySubject_1.ReplaySubject)},t}(Subject_1.AnonymousSubject),WebSocketSubject_2=WebSocketSubject,WebSocketSubject_1={WebSocketSubject:WebSocketSubject_2},webSocket_1=WebSocketSubject_1.WebSocketSubject.create,webSocket={webSocket:webSocket_1};Observable_1.Observable.webSocket=webSocket.webSocket;var __extends$46=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function buffer(e){return function(t){return t.lift(new BufferOperator(e))}}var buffer_2=buffer,BufferOperator=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new BufferSubscriber(e,this.closingNotifier))},e}(),BufferSubscriber=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$46(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.buffer;this.buffer=[],this.destination.next(i)},t}(OuterSubscriber_1.OuterSubscriber),buffer_1={buffer:buffer_2};function buffer$1(e){return buffer_1.buffer(e)(this)}var buffer_3=buffer$1,buffer_2$1={buffer:buffer_3};Observable_1.Observable.prototype.buffer=buffer_2$1.buffer;var __extends$47=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferCount(e,t){return void 0===t&&(t=null),function(r){return r.lift(new BufferCountOperator(e,t))}}var bufferCount_2=bufferCount,BufferCountOperator=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?BufferSkipCountSubscriber:BufferCountSubscriber}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),BufferCountSubscriber=function(e){function t(t,r){e.call(this,t),this.bufferSize=r,this.buffer=[]}return __extends$47(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),BufferSkipCountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return __extends$47(t,e),t.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,n=this.buffers,o=this.count;this.count++,o%r==0&&n.push([]);for(var i=n.length;i--;){var s=n[i];s.push(e),s.length===t&&(n.splice(i,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var n=t.shift();n.length>0&&r.next(n)}e.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),bufferCount_1={bufferCount:bufferCount_2};function bufferCount$1(e,t){return void 0===t&&(t=null),bufferCount_1.bufferCount(e,t)(this)}var bufferCount_3=bufferCount$1,bufferCount_2$1={bufferCount:bufferCount_3};Observable_1.Observable.prototype.bufferCount=bufferCount_2$1.bufferCount;var __extends$48=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferTime(e){var t=arguments.length,r=async.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new BufferTimeOperator(e,n,o,r))}}var bufferTime_2=bufferTime,BufferTimeOperator=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new BufferTimeSubscriber(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),Context=function(){return function(){this.buffer=[]}}(),BufferTimeSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.maxBufferSize=o,this.scheduler=i,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly){var c={subscriber:this,context:s,bufferTimeSpan:r};this.add(s.closeAction=i.schedule(dispatchBufferTimeSpanOnly,r,c))}else{var a={subscriber:this,context:s},u={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:i};this.add(s.closeAction=i.schedule(dispatchBufferClose,r,a)),this.add(i.schedule(dispatchBufferCreation,n,u))}}return __extends$48(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,o=0;o<n;o++){var i=r[o],s=i.buffer;s.push(e),s.length==this.maxBufferSize&&(t=i)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,r=this.destination;t.length>0;){var n=t.shift();r.next(n.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,r,n))}},t.prototype.openContext=function(){var e=new Context;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(Subscriber_1.Subscriber);function dispatchBufferTimeSpanOnly(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function dispatchBufferCreation(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,o=e.scheduler,i=n.openContext();n.closed||(n.add(i.closeAction=o.schedule(dispatchBufferClose,r,{subscriber:n,context:i})),this.schedule(e,t))}function dispatchBufferClose(e){var t=e.subscriber,r=e.context;t.closeContext(r)}var bufferTime_1={bufferTime:bufferTime_2};function bufferTime$1(e){var t=arguments.length,r=async.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),bufferTime_1.bufferTime(e,n,o,r)(this)}var bufferTime_3=bufferTime$1,bufferTime_2$1={bufferTime:bufferTime_3};Observable_1.Observable.prototype.bufferTime=bufferTime_2$1.bufferTime;var __extends$49=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferToggle(e,t){return function(r){return r.lift(new BufferToggleOperator(e,t))}}var bufferToggle_2=bufferToggle,BufferToggleOperator=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new BufferToggleSubscriber(e,this.openings,this.closingSelector))},e}(),BufferToggleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$49(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,o){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=new Subscription_1.Subscription,n={buffer:[],subscription:r};t.push(n);var o=subscribeToResult_1.subscribeToResult(this,e,n);!o||o.closed?this.closeBuffer(n):(o.context=n,this.add(o),r.add(o))},t}(OuterSubscriber_1.OuterSubscriber),bufferToggle_1={bufferToggle:bufferToggle_2};function bufferToggle$1(e,t){return bufferToggle_1.bufferToggle(e,t)(this)}var bufferToggle_3=bufferToggle$1,bufferToggle_2$1={bufferToggle:bufferToggle_3};Observable_1.Observable.prototype.bufferToggle=bufferToggle_2$1.bufferToggle;var __extends$50=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferWhen(e){return function(t){return t.lift(new BufferWhenOperator(e))}}var bufferWhen_2=bufferWhen,BufferWhenOperator=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new BufferWhenSubscriber(e,this.closingSelector))},e}(),BufferWhenSubscriber=function(e){function t(t,r){e.call(this,t),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return __extends$50(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,r,n,o){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=tryCatch_1.tryCatch(this.closingSelector)();r===errorObject.errorObject?this.error(errorObject.errorObject.e):(e=new Subscription_1.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(subscribeToResult_1.subscribeToResult(this,r)),this.subscribing=!1)},t}(OuterSubscriber_1.OuterSubscriber),bufferWhen_1={bufferWhen:bufferWhen_2};function bufferWhen$1(e){return bufferWhen_1.bufferWhen(e)(this)}var bufferWhen_3=bufferWhen$1,bufferWhen_2$1={bufferWhen:bufferWhen_3};Observable_1.Observable.prototype.bufferWhen=bufferWhen_2$1.bufferWhen;var __extends$51=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function catchError(e){return function(t){var r=new CatchOperator(e),n=t.lift(r);return r.caught=n}}var catchError_2=catchError,CatchOperator=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new CatchSubscriber(e,this.selector,this.caught))},e}(),CatchSubscriber=function(e){function t(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return __extends$51(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(subscribeToResult_1.subscribeToResult(this,r))}},t}(OuterSubscriber_1.OuterSubscriber),catchError_1={catchError:catchError_2};function _catch(e){return catchError_1.catchError(e)(this)}var _catch_2=_catch,_catch_1={_catch:_catch_2};function combineAll(e){return function(t){return t.lift(new combineLatest_1.CombineLatestOperator(e))}}Observable_1.Observable.prototype.catch=_catch_1._catch,Observable_1.Observable.prototype._catch=_catch_1._catch;var combineAll_2=combineAll,combineAll_1={combineAll:combineAll_2};function combineAll$1(e){return combineAll_1.combineAll(e)(this)}var combineAll_3=combineAll$1,combineAll_2$1={combineAll:combineAll_3};function combineLatest$3(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return combineLatest_1.combineLatest.apply(void 0,e)(this)}Observable_1.Observable.prototype.combineAll=combineAll_2$1.combineAll;var combineLatest_3$1=combineLatest$3,combineLatest_2$2={combineLatest:combineLatest_3$1};Observable_1.Observable.prototype.combineLatest=combineLatest_2$2.combineLatest;var concat_2$1=concat_1,concatStatic=concat_2$1.concat;function concat$2(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(concat_1.concat.apply(void 0,[t].concat(e)))}}var concat_4=concat$2,concat_3={concatStatic:concatStatic,concat:concat_4},concatStatic$1=concat_1.concat;function concat$3(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return concat_3.concat.apply(void 0,e)(this)}var concat_4$1=concat$3,concat_3$1={concatStatic:concatStatic$1,concat:concat_4$1};function concatAll$1(){return concatAll_1.concatAll()(this)}Observable_1.Observable.prototype.concat=concat_3$1.concat;var concatAll_3=concatAll$1,concatAll_2$1={concatAll:concatAll_3};function concatMap(e,t){return mergeMap_1.mergeMap(e,t,1)}Observable_1.Observable.prototype.concatAll=concatAll_2$1.concatAll;var concatMap_2=concatMap,concatMap_1={concatMap:concatMap_2};function concatMap$1(e,t){return concatMap_1.concatMap(e,t)(this)}var concatMap_3=concatMap$1,concatMap_2$1={concatMap:concatMap_3};function concatMapTo(e,t){return concatMap_1.concatMap(function(){return e},t)}Observable_1.Observable.prototype.concatMap=concatMap_2$1.concatMap;var concatMapTo_2=concatMapTo,concatMapTo_1={concatMapTo:concatMapTo_2};function concatMapTo$1(e,t){return concatMapTo_1.concatMapTo(e,t)(this)}var concatMapTo_3=concatMapTo$1,concatMapTo_2$1={concatMapTo:concatMapTo_3};Observable_1.Observable.prototype.concatMapTo=concatMapTo_2$1.concatMapTo;var __extends$52=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function count(e){return function(t){return t.lift(new CountOperator(e,t))}}var count_2=count,CountOperator=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new CountSubscriber(e,this.predicate,this.source))},e}(),CountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.count=0,this.index=0}return __extends$52(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(Subscriber_1.Subscriber),count_1={count:count_2};function count$1(e){return count_1.count(e)(this)}var count_3=count$1,count_2$1={count:count_3};Observable_1.Observable.prototype.count=count_2$1.count;var __extends$53=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function dematerialize(){return function(e){return e.lift(new DeMaterializeOperator)}}var dematerialize_2=dematerialize,DeMaterializeOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new DeMaterializeSubscriber(e))},e}(),DeMaterializeSubscriber=function(e){function t(t){e.call(this,t)}return __extends$53(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(Subscriber_1.Subscriber),dematerialize_1={dematerialize:dematerialize_2};function dematerialize$1(){return dematerialize_1.dematerialize()(this)}var dematerialize_3=dematerialize$1,dematerialize_2$1={dematerialize:dematerialize_3};Observable_1.Observable.prototype.dematerialize=dematerialize_2$1.dematerialize;var __extends$54=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function debounce(e){return function(t){return t.lift(new DebounceOperator(e))}}var debounce_2=debounce,DebounceOperator=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new DebounceSubscriber(e,this.durationSelector))},e}(),DebounceSubscriber=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return __extends$54(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=subscribeToResult_1.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(e,t,r,n,o){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(OuterSubscriber_1.OuterSubscriber),debounce_1={debounce:debounce_2};function debounce$1(e){return debounce_1.debounce(e)(this)}var debounce_3=debounce$1,debounce_2$1={debounce:debounce_3};Observable_1.Observable.prototype.debounce=debounce_2$1.debounce;var __extends$55=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function debounceTime(e,t){return void 0===t&&(t=async.async),function(r){return r.lift(new DebounceTimeOperator(e,t))}}var debounceTime_2=debounceTime,DebounceTimeOperator=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DebounceTimeSubscriber(e,this.dueTime,this.scheduler))},e}(),DebounceTimeSubscriber=function(e){function t(t,r,n){e.call(this,t),this.dueTime=r,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return __extends$55(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$3,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Subscriber_1.Subscriber);function dispatchNext$3(e){e.debouncedNext()}var debounceTime_1={debounceTime:debounceTime_2};function debounceTime$1(e,t){return void 0===t&&(t=async.async),debounceTime_1.debounceTime(e,t)(this)}var debounceTime_3=debounceTime$1,debounceTime_2$1={debounceTime:debounceTime_3};Observable_1.Observable.prototype.debounceTime=debounceTime_2$1.debounceTime;var __extends$56=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function defaultIfEmpty(e){return void 0===e&&(e=null),function(t){return t.lift(new DefaultIfEmptyOperator(e))}}var defaultIfEmpty_2=defaultIfEmpty,DefaultIfEmptyOperator=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},e}(),DefaultIfEmptySubscriber=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return __extends$56(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Subscriber_1.Subscriber),defaultIfEmpty_1={defaultIfEmpty:defaultIfEmpty_2};function defaultIfEmpty$1(e){return void 0===e&&(e=null),defaultIfEmpty_1.defaultIfEmpty(e)(this)}var defaultIfEmpty_3=defaultIfEmpty$1,defaultIfEmpty_2$1={defaultIfEmpty:defaultIfEmpty_3};Observable_1.Observable.prototype.defaultIfEmpty=defaultIfEmpty_2$1.defaultIfEmpty;var __extends$57=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function delay(e,t){void 0===t&&(t=async.async);var r=isDate_1.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new DelayOperator(r,t))}}var delay_2=delay,DelayOperator=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DelaySubscriber(e,this.delay,this.scheduler))},e}(),DelaySubscriber=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return __extends$57(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,o=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(e,i)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new DelayMessage(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete())},t}(Subscriber_1.Subscriber),DelayMessage=function(){return function(e,t){this.time=e,this.notification=t}}(),delay_1={delay:delay_2};function delay$1(e,t){return void 0===t&&(t=async.async),delay_1.delay(e,t)(this)}var delay_3=delay$1,delay_2$1={delay:delay_3};Observable_1.Observable.prototype.delay=delay_2$1.delay;var __extends$58=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function delayWhen(e,t){return t?function(r){return new SubscriptionDelayObservable(r,t).lift(new DelayWhenOperator(e))}:function(t){return t.lift(new DelayWhenOperator(e))}}var delayWhen_2=delayWhen,DelayWhenOperator=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new DelayWhenSubscriber(e,this.delayDurationSelector))},e}(),DelayWhenSubscriber=function(e){function t(t,r){e.call(this,t),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return __extends$58(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(e),this.removeSubscription(o),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},t.prototype.tryDelay=function(e,t){var r=subscribeToResult_1.subscribeToResult(this,e,t);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(e){function t(t,r){e.call(this),this.source=t,this.subscriptionDelay=r}return __extends$58(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(e,this.source))},t}(Observable_1.Observable),SubscriptionDelaySubscriber=function(e){function t(t,r){e.call(this),this.parent=t,this.source=r,this.sourceSubscribed=!1}return __extends$58(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(Subscriber_1.Subscriber),delayWhen_1={delayWhen:delayWhen_2};function delayWhen$1(e,t){return delayWhen_1.delayWhen(e,t)(this)}var delayWhen_3=delayWhen$1,delayWhen_2$1={delayWhen:delayWhen_3};function minimalSetImpl(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}Observable_1.Observable.prototype.delayWhen=delayWhen_2$1.delayWhen;var minimalSetImpl_1=minimalSetImpl,Set=root.root.Set||minimalSetImpl(),_Set={minimalSetImpl:minimalSetImpl_1,Set:Set},__extends$59=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function distinct(e,t){return function(r){return r.lift(new DistinctOperator(e,t))}}var distinct_2=distinct,DistinctOperator=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctSubscriber(e,this.keySelector,this.flushes))},e}(),DistinctSubscriber=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new _Set.Set,n&&this.add(subscribeToResult_1.subscribeToResult(this,n))}return __extends$59(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(OuterSubscriber_1.OuterSubscriber),DistinctSubscriber_1=DistinctSubscriber,distinct_1={distinct:distinct_2,DistinctSubscriber:DistinctSubscriber_1};function distinct$1(e,t){return distinct_1.distinct(e,t)(this)}var distinct_3=distinct$1,distinct_2$1={distinct:distinct_3};Observable_1.Observable.prototype.distinct=distinct_2$1.distinct;var __extends$60=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function distinctUntilChanged(e,t){return function(r){return r.lift(new DistinctUntilChangedOperator(e,t))}}var distinctUntilChanged_2=distinctUntilChanged,DistinctUntilChangedOperator=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctUntilChangedSubscriber(e,this.compare,this.keySelector))},e}(),DistinctUntilChangedSubscriber=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return __extends$60(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=tryCatch_1.tryCatch(this.keySelector)(e))===errorObject.errorObject)return this.destination.error(errorObject.errorObject.e);var r=!1;if(this.hasKey){if((r=tryCatch_1.tryCatch(this.compare)(this.key,t))===errorObject.errorObject)return this.destination.error(errorObject.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(Subscriber_1.Subscriber),distinctUntilChanged_1={distinctUntilChanged:distinctUntilChanged_2};function distinctUntilChanged$1(e,t){return distinctUntilChanged_1.distinctUntilChanged(e,t)(this)}var distinctUntilChanged_3=distinctUntilChanged$1,distinctUntilChanged_2$1={distinctUntilChanged:distinctUntilChanged_3};function distinctUntilKeyChanged(e,t){return distinctUntilChanged_1.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}Observable_1.Observable.prototype.distinctUntilChanged=distinctUntilChanged_2$1.distinctUntilChanged;var distinctUntilKeyChanged_2=distinctUntilKeyChanged,distinctUntilKeyChanged_1={distinctUntilKeyChanged:distinctUntilKeyChanged_2};function distinctUntilKeyChanged$1(e,t){return distinctUntilKeyChanged_1.distinctUntilKeyChanged(e,t)(this)}var distinctUntilKeyChanged_3=distinctUntilKeyChanged$1,distinctUntilKeyChanged_2$1={distinctUntilKeyChanged:distinctUntilKeyChanged_3};Observable_1.Observable.prototype.distinctUntilKeyChanged=distinctUntilKeyChanged_2$1.distinctUntilKeyChanged;var __extends$61=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function tap(e,t,r){return function(n){return n.lift(new DoOperator(e,t,r))}}var tap_2=tap,DoOperator=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new DoSubscriber(e,this.nextOrObserver,this.error,this.complete))},e}(),DoSubscriber=function(e){function t(t,r,n,o){e.call(this,t);var i=new Subscriber_1.Subscriber(r,n,o);i.syncErrorThrowable=!0,this.add(i),this.safeSubscriber=i}return __extends$61(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(Subscriber_1.Subscriber),tap_1={tap:tap_2};function _do(e,t,r){return tap_1.tap(e,t,r)(this)}var _do_2=_do,_do_1={_do:_do_2};Observable_1.Observable.prototype.do=_do_1._do,Observable_1.Observable.prototype._do=_do_1._do;var __extends$62=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function exhaust(){return function(e){return e.lift(new SwitchFirstOperator)}}var exhaust_2=exhaust,SwitchFirstOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new SwitchFirstSubscriber(e))},e}(),SwitchFirstSubscriber=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return __extends$62(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),exhaust_1={exhaust:exhaust_2};function exhaust$1(){return exhaust_1.exhaust()(this)}var exhaust_3=exhaust$1,exhaust_2$1={exhaust:exhaust_3};Observable_1.Observable.prototype.exhaust=exhaust_2$1.exhaust;var __extends$63=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function exhaustMap(e,t){return function(r){return r.lift(new SwitchFirstMapOperator(e,t))}}var exhaustMap_2=exhaustMap,SwitchFirstMapOperator=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchFirstMapSubscriber(e,this.project,this.resultSelector))},e}(),SwitchFirstMapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return __extends$63(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var n=this.project(e,t);this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,n,e,t))}catch(e){r.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.resultSelector,s=this.destination;i?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var o=this.resultSelector,i=this.destination;try{var s=o(e,t,r,n);i.next(s)}catch(e){i.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),exhaustMap_1={exhaustMap:exhaustMap_2};function exhaustMap$1(e,t){return exhaustMap_1.exhaustMap(e,t)(this)}var exhaustMap_3=exhaustMap$1,exhaustMap_2$1={exhaustMap:exhaustMap_3};Observable_1.Observable.prototype.exhaustMap=exhaustMap_2$1.exhaustMap;var __extends$64=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function expand(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new ExpandOperator(e,t,r))}}var expand_2=expand,ExpandOperator=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new ExpandSubscriber(e,this.project,this.concurrent,this.scheduler))},e}(),ExpandOperator_1=ExpandOperator,ExpandSubscriber=function(e){function t(t,r,n,o){e.call(this,t),this.project=r,this.concurrent=n,this.scheduler=o,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}return __extends$64(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,o=e.index;t.subscribeToProjection(r,n,o)},t.prototype._next=function(e){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(e);var o=tryCatch_1.tryCatch(this.project)(e,n);if(o===errorObject.errorObject)r.error(errorObject.errorObject.e);else if(this.scheduler){var i={subscriber:this,result:o,value:e,index:n};this.add(this.scheduler.schedule(t.dispatch,0,i))}else this.subscribeToProjection(o,e,n)}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),ExpandSubscriber_1=ExpandSubscriber,expand_1={expand:expand_2,ExpandOperator:ExpandOperator_1,ExpandSubscriber:ExpandSubscriber_1};function expand$1(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,expand_1.expand(e,t,r)(this)}var expand_3=expand$1,expand_2$1={expand:expand_3};Observable_1.Observable.prototype.expand=expand_2$1.expand;var __extends$65=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArgumentOutOfRangeError=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return __extends$65(t,e),t}(Error),ArgumentOutOfRangeError_2=ArgumentOutOfRangeError,ArgumentOutOfRangeError_1={ArgumentOutOfRangeError:ArgumentOutOfRangeError_2},__extends$66=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function elementAt(e,t){return function(r){return r.lift(new ElementAtOperator(e,t))}}var elementAt_2=elementAt,ElementAtOperator=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new ElementAtSubscriber(e,this.index,this.defaultValue))},e}(),ElementAtSubscriber=function(e){function t(t,r,n){e.call(this,t),this.index=r,this.defaultValue=n}return __extends$66(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError)),e.complete()},t}(Subscriber_1.Subscriber),elementAt_1={elementAt:elementAt_2};function elementAt$1(e,t){return elementAt_1.elementAt(e,t)(this)}var elementAt_3=elementAt$1,elementAt_2$1={elementAt:elementAt_3};Observable_1.Observable.prototype.elementAt=elementAt_2$1.elementAt;var __extends$67=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function filter(e,t){return function(r){return r.lift(new FilterOperator(e,t))}}var filter_2=filter,FilterOperator=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},e}(),FilterSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0}return __extends$67(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Subscriber_1.Subscriber),filter_1={filter:filter_2};function filter$1(e,t){return filter_1.filter(e,t)(this)}var filter_3=filter$1,filter_2$1={filter:filter_3};Observable_1.Observable.prototype.filter=filter_2$1.filter;var __extends$68=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function finalize(e){return function(t){return t.lift(new FinallyOperator(e))}}var finalize_2=finalize,FinallyOperator=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new FinallySubscriber(e,this.callback))},e}(),FinallySubscriber=function(e){function t(t,r){e.call(this,t),this.add(new Subscription_1.Subscription(r))}return __extends$68(t,e),t}(Subscriber_1.Subscriber),finalize_1={finalize:finalize_2};function _finally(e){return finalize_1.finalize(e)(this)}var _finally_2=_finally,_finally_1={_finally:_finally_2};Observable_1.Observable.prototype.finally=_finally_1._finally,Observable_1.Observable.prototype._finally=_finally_1._finally;var __extends$69=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function find(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(r){return r.lift(new FindValueOperator(e,r,!1,t))}}var find_2=find,FindValueOperator=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new FindValueSubscriber(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),FindValueOperator_1=FindValueOperator,FindValueSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.predicate=r,this.source=n,this.yieldIndex=o,this.thisArg=i,this.index=0}return __extends$69(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(Subscriber_1.Subscriber),FindValueSubscriber_1=FindValueSubscriber,find_1={find:find_2,FindValueOperator:FindValueOperator_1,FindValueSubscriber:FindValueSubscriber_1};function find$1(e,t){return find_1.find(e,t)(this)}var find_3=find$1,find_2$1={find:find_3};function findIndex(e,t){return function(r){return r.lift(new find_1.FindValueOperator(e,r,!0,t))}}Observable_1.Observable.prototype.find=find_2$1.find;var findIndex_2=findIndex,findIndex_1={findIndex:findIndex_2};function findIndex$1(e,t){return findIndex_1.findIndex(e,t)(this)}var findIndex_3=findIndex$1,findIndex_2$1={findIndex:findIndex_3};Observable_1.Observable.prototype.findIndex=findIndex_2$1.findIndex;var __extends$70=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},EmptyError=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return __extends$70(t,e),t}(Error),EmptyError_2=EmptyError,EmptyError_1={EmptyError:EmptyError_2},__extends$71=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function first(e,t,r){return function(n){return n.lift(new FirstOperator(e,t,r,n))}}var first_2=first,FirstOperator=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new FirstSubscriber(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),FirstSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=o,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return __extends$71(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new EmptyError_1.EmptyError):(e.next(this.defaultValue),e.complete())},t}(Subscriber_1.Subscriber),first_1={first:first_2};function first$1(e,t,r){return first_1.first(e,t,r)(this)}var first_3=first$1,first_2$1={first:first_3};Observable_1.Observable.prototype.first=first_2$1.first;var MapPolyfill=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}(),MapPolyfill_2=MapPolyfill,MapPolyfill_1={MapPolyfill:MapPolyfill_2},Map=root.root.Map||MapPolyfill_1.MapPolyfill,_Map={Map:Map},FastMap=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&e.call(t,r[n],n)},e.prototype.clear=function(){this.values={}},e}(),FastMap_2=FastMap,FastMap_1={FastMap:FastMap_2},__extends$72=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function groupBy(e,t,r,n){return function(o){return o.lift(new GroupByOperator(e,t,r,n))}}var groupBy_2=groupBy,GroupByOperator=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new GroupBySubscriber(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),GroupBySubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.keySelector=r,this.elementSelector=n,this.durationSelector=o,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return __extends$72(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new FastMap_1.FastMap:new _Map.Map);var n,o=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!o){o=this.subjectSelector?this.subjectSelector():new Subject_1.Subject,r.set(t,o);var i=new GroupedObservable(t,o,this);if(this.destination.next(i),this.durationSelector){var s=void 0;try{s=this.durationSelector(new GroupedObservable(t,o))}catch(e){return void this.error(e)}this.add(s.subscribe(new GroupDurationSubscriber(t,o,this)))}}o.closed||o.next(n)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,r){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(e){function t(t,r,n){e.call(this,r),this.key=t,this.group=r,this.parent=n}return __extends$72(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(Subscriber_1.Subscriber),GroupedObservable=function(e){function t(t,r,n){e.call(this),this.key=t,this.groupSubject=r,this.refCountSubscription=n}return __extends$72(t,e),t.prototype._subscribe=function(e){var t=new Subscription_1.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new InnerRefCountSubscription(r)),t.add(n.subscribe(e)),t},t}(Observable_1.Observable),GroupedObservable_1=GroupedObservable,InnerRefCountSubscription=function(e){function t(t){e.call(this),this.parent=t,t.count++}return __extends$72(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Subscription_1.Subscription),groupBy_1={groupBy:groupBy_2,GroupedObservable:GroupedObservable_1},GroupedObservable$1=groupBy_1.GroupedObservable;function groupBy$1(e,t,r,n){return groupBy_1.groupBy(e,t,r,n)(this)}var groupBy_3=groupBy$1,groupBy_2$1={GroupedObservable:GroupedObservable$1,groupBy:groupBy_3};Observable_1.Observable.prototype.groupBy=groupBy_2$1.groupBy;var __extends$73=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function ignoreElements(){return function(e){return e.lift(new IgnoreElementsOperator)}}var ignoreElements_2=ignoreElements,IgnoreElementsOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IgnoreElementsSubscriber(e))},e}(),IgnoreElementsSubscriber=function(e){function t(){e.apply(this,arguments)}return __extends$73(t,e),t.prototype._next=function(e){noop_1.noop()},t}(Subscriber_1.Subscriber),ignoreElements_1={ignoreElements:ignoreElements_2};function ignoreElements$1(){return ignoreElements_1.ignoreElements()(this)}var ignoreElements_3=ignoreElements$1,ignoreElements_2$1={ignoreElements:ignoreElements_3};Observable_1.Observable.prototype.ignoreElements=ignoreElements_2$1.ignoreElements;var __extends$74=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function isEmpty(){return function(e){return e.lift(new IsEmptyOperator)}}var isEmpty_2=isEmpty,IsEmptyOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IsEmptySubscriber(e))},e}(),IsEmptySubscriber=function(e){function t(t){e.call(this,t)}return __extends$74(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Subscriber_1.Subscriber),isEmpty_1={isEmpty:isEmpty_2};function isEmpty$1(){return isEmpty_1.isEmpty()(this)}var isEmpty_3=isEmpty$1,isEmpty_2$1={isEmpty:isEmpty_3};Observable_1.Observable.prototype.isEmpty=isEmpty_2$1.isEmpty;var __extends$75=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function audit(e){return function(t){return t.lift(new AuditOperator(e))}}var audit_2=audit,AuditOperator=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new AuditSubscriber(e,this.durationSelector))},e}(),AuditSubscriber=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1}return __extends$75(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=tryCatch_1.tryCatch(this.durationSelector)(e);if(t===errorObject.errorObject)this.destination.error(errorObject.errorObject.e);else{var r=subscribeToResult_1.subscribeToResult(this,t);r.closed?this.clearThrottle():this.add(this.throttled=r)}}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(OuterSubscriber_1.OuterSubscriber),audit_1={audit:audit_2};function audit$1(e){return audit_1.audit(e)(this)}var audit_3=audit$1,audit_2$1={audit:audit_3};function auditTime(e,t){return void 0===t&&(t=async.async),audit_1.audit(function(){return timer.timer(e,t)})}Observable_1.Observable.prototype.audit=audit_2$1.audit;var auditTime_2=auditTime,auditTime_1={auditTime:auditTime_2};function auditTime$1(e,t){return void 0===t&&(t=async.async),auditTime_1.auditTime(e,t)(this)}var auditTime_3=auditTime$1,auditTime_2$1={auditTime:auditTime_3};Observable_1.Observable.prototype.auditTime=auditTime_2$1.auditTime;var __extends$76=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function last(e,t,r){return function(n){return n.lift(new LastOperator(e,t,r,n))}}var last_2=last,LastOperator=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new LastSubscriber(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),LastSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=o,this.source=i,this.hasValue=!1,this.index=0,void 0!==o&&(this.lastValue=o,this.hasValue=!0)}return __extends$76(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new EmptyError_1.EmptyError)},t}(Subscriber_1.Subscriber),last_1={last:last_2};function last$1(e,t,r){return last_1.last(e,t,r)(this)}var last_3=last$1,last_2$1={last:last_3};function letProto(e){return e(this)}Observable_1.Observable.prototype.last=last_2$1.last;var letProto_1=letProto,_let={letProto:letProto_1};Observable_1.Observable.prototype.let=_let.letProto,Observable_1.Observable.prototype.letBind=_let.letProto;var __extends$77=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function every(e,t){return function(r){return r.lift(new EveryOperator(e,t,r))}}var every_2=every,EveryOperator=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new EverySubscriber(e,this.predicate,this.thisArg,this.source))},e}(),EverySubscriber=function(e){function t(t,r,n,o){e.call(this,t),this.predicate=r,this.thisArg=n,this.source=o,this.index=0,this.thisArg=n||this}return __extends$77(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Subscriber_1.Subscriber),every_1={every:every_2};function every$1(e,t){return every_1.every(e,t)(this)}var every_3=every$1,every_2$1={every:every_3};function map$1(e,t){return map_1.map(e,t)(this)}Observable_1.Observable.prototype.every=every_2$1.every;var map_3=map$1,map_2$1={map:map_3};Observable_1.Observable.prototype.map=map_2$1.map;var __extends$78=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mapTo(e){return function(t){return t.lift(new MapToOperator(e))}}var mapTo_2=mapTo,MapToOperator=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new MapToSubscriber(e,this.value))},e}(),MapToSubscriber=function(e){function t(t,r){e.call(this,t),this.value=r}return __extends$78(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(Subscriber_1.Subscriber),mapTo_1={mapTo:mapTo_2};function mapTo$1(e){return mapTo_1.mapTo(e)(this)}var mapTo_3=mapTo$1,mapTo_2$1={mapTo:mapTo_3};Observable_1.Observable.prototype.mapTo=mapTo_2$1.mapTo;var __extends$79=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function materialize(){return function(e){return e.lift(new MaterializeOperator)}}var materialize_2=materialize,MaterializeOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new MaterializeSubscriber(e))},e}(),MaterializeSubscriber=function(e){function t(t){e.call(this,t)}return __extends$79(t,e),t.prototype._next=function(e){this.destination.next(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(Notification_1.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(Notification_1.Notification.createComplete()),e.complete()},t}(Subscriber_1.Subscriber),materialize_1={materialize:materialize_2};function materialize$1(){return materialize_1.materialize()(this)}var materialize_3=materialize$1,materialize_2$1={materialize:materialize_3};Observable_1.Observable.prototype.materialize=materialize_2$1.materialize;var __extends$80=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function scan(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new ScanOperator(e,t,r))}}var scan_2=scan,ScanOperator=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new ScanSubscriber(e,this.accumulator,this.seed,this.hasSeed))},e}(),ScanSubscriber=function(e){function t(t,r,n,o){e.call(this,t),this.accumulator=r,this._seed=n,this.hasSeed=o,this.index=0}return __extends$80(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Subscriber_1.Subscriber),scan_1={scan:scan_2},__extends$81=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeLast(e){return function(t){return 0===e?new EmptyObservable_1.EmptyObservable:t.lift(new TakeLastOperator(e))}}var takeLast_2=takeLast,TakeLastOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeLastSubscriber(e,this.total))},e}(),TakeLastSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return __extends$81(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,o=0;o<r;o++){var i=t++%r;e.next(n[i])}e.complete()},t}(Subscriber_1.Subscriber),takeLast_1={takeLast:takeLast_2};function reduce(e,t){return arguments.length>=2?function(r){return pipe_1.pipe(scan_1.scan(e,t),takeLast_1.takeLast(1),defaultIfEmpty_1.defaultIfEmpty(t))(r)}:function(t){return pipe_1.pipe(scan_1.scan(function(t,r,n){return e(t,r,n+1)}),takeLast_1.takeLast(1))(t)}}var reduce_2=reduce,reduce_1={reduce:reduce_2};function max(e){var t="function"==typeof e?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t};return reduce_1.reduce(t)}var max_2=max,max_1={max:max_2};function max$1(e){return max_1.max(e)(this)}var max_3=max$1,max_2$1={max:max_3};Observable_1.Observable.prototype.max=max_2$1.max;var merge_2$1=merge_1,mergeStatic=merge_2$1.merge;function merge$2(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(merge_1.merge.apply(void 0,[t].concat(e)))}}var merge_4=merge$2,merge_3={mergeStatic:mergeStatic,merge:merge_4},mergeStatic$1=merge_1.merge;function merge$3(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return merge_3.merge.apply(void 0,e)(this)}var merge_4$1=merge$3,merge_3$1={mergeStatic:mergeStatic$1,merge:merge_4$1};function mergeAll$1(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeAll_1.mergeAll(e)(this)}Observable_1.Observable.prototype.merge=merge_3$1.merge;var mergeAll_3=mergeAll$1,mergeAll_2$1={mergeAll:mergeAll_3};function mergeMap$1(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),mergeMap_1.mergeMap(e,t,r)(this)}Observable_1.Observable.prototype.mergeAll=mergeAll_2$1.mergeAll;var mergeMap_3=mergeMap$1,mergeMap_2$1={mergeMap:mergeMap_3};Observable_1.Observable.prototype.mergeMap=mergeMap_2$1.mergeMap,Observable_1.Observable.prototype.flatMap=mergeMap_2$1.mergeMap;var __extends$82=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeMapTo(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),function(n){return n.lift(new MergeMapToOperator(e,t,r))}}var mergeMapTo_2=mergeMapTo,MergeMapToOperator=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapToSubscriber(e,this.ish,this.resultSelector,this.concurrent))},e}(),MergeMapToOperator_1=MergeMapToOperator,MergeMapToSubscriber=function(e){function t(t,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$82(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,o=this.destination;this.active++,this._innerSub(n,o,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,n,o){this.add(subscribeToResult_1.subscribeToResult(this,e,n,o))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.resultSelector,s=this.destination;i?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var o,i=this.resultSelector,s=this.destination;try{o=i(e,t,r,n)}catch(e){return void s.error(e)}s.next(o)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),MergeMapToSubscriber_1=MergeMapToSubscriber,mergeMapTo_1={mergeMapTo:mergeMapTo_2,MergeMapToOperator:MergeMapToOperator_1,MergeMapToSubscriber:MergeMapToSubscriber_1};function mergeMapTo$1(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),mergeMapTo_1.mergeMapTo(e,t,r)(this)}var mergeMapTo_3=mergeMapTo$1,mergeMapTo_2$1={mergeMapTo:mergeMapTo_3};Observable_1.Observable.prototype.flatMapTo=mergeMapTo_2$1.mergeMapTo,Observable_1.Observable.prototype.mergeMapTo=mergeMapTo_2$1.mergeMapTo;var __extends$83=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeScan(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new MergeScanOperator(e,t,r))}}var mergeScan_2=mergeScan,MergeScanOperator=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeScanSubscriber(e,this.accumulator,this.seed,this.concurrent))},e}(),MergeScanOperator_1=MergeScanOperator,MergeScanSubscriber=function(e){function t(t,r,n,o){e.call(this,t),this.accumulator=r,this.acc=n,this.concurrent=o,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$83(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=tryCatch_1.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===errorObject.errorObject?n.error(errorObject.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.destination;this.acc=t,this.hasValue=!0,i.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(OuterSubscriber_1.OuterSubscriber),MergeScanSubscriber_1=MergeScanSubscriber,mergeScan_1={mergeScan:mergeScan_2,MergeScanOperator:MergeScanOperator_1,MergeScanSubscriber:MergeScanSubscriber_1};function mergeScan$1(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),mergeScan_1.mergeScan(e,t,r)(this)}var mergeScan_3=mergeScan$1,mergeScan_2$1={mergeScan:mergeScan_3};function min(e){var t="function"==typeof e?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t};return reduce_1.reduce(t)}Observable_1.Observable.prototype.mergeScan=mergeScan_2$1.mergeScan;var min_2=min,min_1={min:min_2};function min$1(e){return min_1.min(e)(this)}var min_3=min$1,min_2$1={min:min_3};Observable_1.Observable.prototype.min=min_2$1.min;var __extends$84=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var refCount_2=refCount,RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new RefCountSubscriber(e,r),o=t.subscribe(n);return n.closed||(n.connection=r.connect()),o},e}(),RefCountSubscriber=function(e){function t(t,r){e.call(this,t),this.connectable=r}return __extends$84(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber_1.Subscriber),refCount_1={refCount:refCount_2},__extends$85=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ConnectableObservable=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}return __extends$85(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription_1.Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed?(this._connection=null,e=Subscription_1.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return refCount_1.refCount()(this)},t}(Observable_1.Observable),ConnectableObservable_2=ConnectableObservable,connectableProto=ConnectableObservable.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}},ConnectableSubscriber=function(e){function t(t,r){e.call(this,t),this.connectable=r}return __extends$85(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(Subject_1.SubjectSubscriber),RefCountSubscriber$1=function(e){function t(t,r){e.call(this,t),this.connectable=r}return __extends$85(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber_1.Subscriber),ConnectableObservable_1={ConnectableObservable:ConnectableObservable_2,connectableObservableDescriptor:connectableObservableDescriptor};function multicast(e,t){return function(r){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new MulticastOperator(n,t));var o=Object.create(r,ConnectableObservable_1.connectableObservableDescriptor);return o.source=r,o.subjectFactory=n,o}}var multicast_2=multicast,MulticastOperator=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),o=r(n).subscribe(e);return o.add(t.subscribe(n)),o},e}(),MulticastOperator_1=MulticastOperator,multicast_1={multicast:multicast_2,MulticastOperator:MulticastOperator_1};function multicast$1(e,t){return multicast_1.multicast(e,t)(this)}var multicast_3=multicast$1,multicast_2$1={multicast:multicast_3};function observeOn$1(e,t){return void 0===t&&(t=0),observeOn_1.observeOn(e,t)(this)}Observable_1.Observable.prototype.multicast=multicast_2$1.multicast;var observeOn_3=observeOn$1,observeOn_2$1={observeOn:observeOn_3};function onErrorResumeNext$3(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return onErrorResumeNext_1.onErrorResumeNext.apply(void 0,e)(this)}Observable_1.Observable.prototype.observeOn=observeOn_2$1.observeOn;var onErrorResumeNext_3=onErrorResumeNext$3,onErrorResumeNext_2$2={onErrorResumeNext:onErrorResumeNext_3};Observable_1.Observable.prototype.onErrorResumeNext=onErrorResumeNext_2$2.onErrorResumeNext;var __extends$86=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function pairwise(){return function(e){return e.lift(new PairwiseOperator)}}var pairwise_2=pairwise,PairwiseOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new PairwiseSubscriber(e))},e}(),PairwiseSubscriber=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return __extends$86(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(Subscriber_1.Subscriber),pairwise_1={pairwise:pairwise_2};function pairwise$1(){return pairwise_1.pairwise()(this)}var pairwise_3=pairwise$1,pairwise_2$1={pairwise:pairwise_3};function not(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}Observable_1.Observable.prototype.pairwise=pairwise_2$1.pairwise;var not_2=not,not_1={not:not_2};function partition(e,t){return function(r){return[filter_1.filter(e,t)(r),filter_1.filter(not_1.not(e,t))(r)]}}var partition_2=partition,partition_1={partition:partition_2};function partition$1(e,t){return partition_1.partition(e,t)(this)}var partition_3=partition$1,partition_2$1={partition:partition_3};function pluck(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return map_1.map(plucker(e,r))(t)}}Observable_1.Observable.prototype.partition=partition_2$1.partition;var pluck_2=pluck;function plucker(e,t){return function(r){for(var n=r,o=0;o<t;o++){var i=n[e[o]];if(void 0===i)return;n=i}return n}}var pluck_1={pluck:pluck_2};function pluck$1(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return pluck_1.pluck.apply(void 0,e)(this)}var pluck_3=pluck$1,pluck_2$1={pluck:pluck_3};function publish(e){return e?multicast_1.multicast(function(){return new Subject_1.Subject},e):multicast_1.multicast(new Subject_1.Subject)}Observable_1.Observable.prototype.pluck=pluck_2$1.pluck;var publish_2=publish,publish_1={publish:publish_2};function publish$1(e){return publish_1.publish(e)(this)}var publish_3=publish$1,publish_2$1={publish:publish_3};Observable_1.Observable.prototype.publish=publish_2$1.publish;var __extends$87=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BehaviorSubject=function(e){function t(t){e.call(this),this._value=t}return __extends$87(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Subject_1.Subject),BehaviorSubject_2=BehaviorSubject,BehaviorSubject_1={BehaviorSubject:BehaviorSubject_2};function publishBehavior(e){return function(t){return multicast_1.multicast(new BehaviorSubject_1.BehaviorSubject(e))(t)}}var publishBehavior_2=publishBehavior,publishBehavior_1={publishBehavior:publishBehavior_2};function publishBehavior$1(e){return publishBehavior_1.publishBehavior(e)(this)}var publishBehavior_3=publishBehavior$1,publishBehavior_2$1={publishBehavior:publishBehavior_3};function publishReplay(e,t,r,n){r&&"function"!=typeof r&&(n=r);var o="function"==typeof r?r:void 0,i=new ReplaySubject_1.ReplaySubject(e,t,n);return function(e){return multicast_1.multicast(function(){return i},o)(e)}}Observable_1.Observable.prototype.publishBehavior=publishBehavior_2$1.publishBehavior;var publishReplay_2=publishReplay,publishReplay_1={publishReplay:publishReplay_2};function publishReplay$1(e,t,r,n){return publishReplay_1.publishReplay(e,t,r,n)(this)}var publishReplay_3=publishReplay$1,publishReplay_2$1={publishReplay:publishReplay_3};function publishLast(){return function(e){return multicast_1.multicast(new AsyncSubject_1.AsyncSubject)(e)}}Observable_1.Observable.prototype.publishReplay=publishReplay_2$1.publishReplay;var publishLast_2=publishLast,publishLast_1={publishLast:publishLast_2};function publishLast$1(){return publishLast_1.publishLast()(this)}var publishLast_3=publishLast$1,publishLast_2$1={publishLast:publishLast_3};function race$2(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),t.lift.call(race_1.race.apply(void 0,[t].concat(e)))}}Observable_1.Observable.prototype.publishLast=publishLast_2$1.publishLast;var race_3=race$2,race_2$1={race:race_3},raceStatic=race_1.race;function race$3(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return race_2$1.race.apply(void 0,e)(this)}var race_4=race$3,race_3$1={raceStatic:raceStatic,race:race_4};function reduce$1(e,t){return arguments.length>=2?reduce_1.reduce(e,t)(this):reduce_1.reduce(e)(this)}Observable_1.Observable.prototype.race=race_3$1.race;var reduce_3=reduce$1,reduce_2$1={reduce:reduce_3};Observable_1.Observable.prototype.reduce=reduce_2$1.reduce;var __extends$88=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function repeat(e){return void 0===e&&(e=-1),function(t){return 0===e?new EmptyObservable_1.EmptyObservable:e<0?t.lift(new RepeatOperator(-1,t)):t.lift(new RepeatOperator(e-1,t))}}var repeat_2=repeat,RepeatOperator=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RepeatSubscriber(e,this.count,this.source))},e}(),RepeatSubscriber=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return __extends$88(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(Subscriber_1.Subscriber),repeat_1={repeat:repeat_2};function repeat$1(e){return void 0===e&&(e=-1),repeat_1.repeat(e)(this)}var repeat_3=repeat$1,repeat_2$1={repeat:repeat_3};Observable_1.Observable.prototype.repeat=repeat_2$1.repeat;var __extends$89=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function repeatWhen(e){return function(t){return t.lift(new RepeatWhenOperator(e))}}var repeatWhen_2=repeatWhen,RepeatWhenOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new RepeatWhenSubscriber(e,this.notifier,t))},e}(),RepeatWhenSubscriber=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n,this.sourceIsBeingSubscribedTo=!0}return __extends$89(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this.notifications,r=this.retries,n=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=t,this.retries=r,this.retriesSubscription=n,this},t.prototype.subscribeToRetries=function(){this.notifications=new Subject_1.Subject;var t=tryCatch_1.tryCatch(this.notifier)(this.notifications);if(t===errorObject.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=subscribeToResult_1.subscribeToResult(this,t)},t}(OuterSubscriber_1.OuterSubscriber),repeatWhen_1={repeatWhen:repeatWhen_2};function repeatWhen$1(e){return repeatWhen_1.repeatWhen(e)(this)}var repeatWhen_3=repeatWhen$1,repeatWhen_2$1={repeatWhen:repeatWhen_3};Observable_1.Observable.prototype.repeatWhen=repeatWhen_2$1.repeatWhen;var __extends$90=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function retry(e){return void 0===e&&(e=-1),function(t){return t.lift(new RetryOperator(e,t))}}var retry_2=retry,RetryOperator=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetrySubscriber(e,this.count,this.source))},e}(),RetrySubscriber=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return __extends$90(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(Subscriber_1.Subscriber),retry_1={retry:retry_2};function retry$1(e){return void 0===e&&(e=-1),retry_1.retry(e)(this)}var retry_3=retry$1,retry_2$1={retry:retry_3};Observable_1.Observable.prototype.retry=retry_2$1.retry;var __extends$91=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function retryWhen(e){return function(t){return t.lift(new RetryWhenOperator(e,t))}}var retryWhen_2=retryWhen,RetryWhenOperator=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetryWhenSubscriber(e,this.notifier,this.source))},e}(),RetryWhenSubscriber=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n}return __extends$91(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,o=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{if(r=new Subject_1.Subject,(n=tryCatch_1.tryCatch(this.notifier)(r))===errorObject.errorObject)return e.prototype.error.call(this,errorObject.errorObject.e);o=subscribeToResult_1.subscribeToResult(this,n)}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=o,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.errors,s=this.retries,c=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=i,this.retries=s,this.retriesSubscription=c,this.source.subscribe(this)},t}(OuterSubscriber_1.OuterSubscriber),retryWhen_1={retryWhen:retryWhen_2};function retryWhen$1(e){return retryWhen_1.retryWhen(e)(this)}var retryWhen_3=retryWhen$1,retryWhen_2$1={retryWhen:retryWhen_3};Observable_1.Observable.prototype.retryWhen=retryWhen_2$1.retryWhen;var __extends$92=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sample(e){return function(t){return t.lift(new SampleOperator(e))}}var sample_2=sample,SampleOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new SampleSubscriber(e),n=t.subscribe(r);return n.add(subscribeToResult_1.subscribeToResult(r,this.notifier)),n},e}(),SampleSubscriber=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return __extends$92(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,n,o){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(OuterSubscriber_1.OuterSubscriber),sample_1={sample:sample_2};function sample$1(e){return sample_1.sample(e)(this)}var sample_3=sample$1,sample_2$1={sample:sample_3};Observable_1.Observable.prototype.sample=sample_2$1.sample;var __extends$93=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sampleTime(e,t){return void 0===t&&(t=async.async),function(r){return r.lift(new SampleTimeOperator(e,t))}}var sampleTime_2=sampleTime,SampleTimeOperator=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new SampleTimeSubscriber(e,this.period,this.scheduler))},e}(),SampleTimeSubscriber=function(e){function t(t,r,n){e.call(this,t),this.period=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(dispatchNotification,r,{subscriber:this,period:r}))}return __extends$93(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(Subscriber_1.Subscriber);function dispatchNotification(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}var sampleTime_1={sampleTime:sampleTime_2};function sampleTime$1(e,t){return void 0===t&&(t=async.async),sampleTime_1.sampleTime(e,t)(this)}var sampleTime_3=sampleTime$1,sampleTime_2$1={sampleTime:sampleTime_3};function scan$1(e,t){return arguments.length>=2?scan_1.scan(e,t)(this):scan_1.scan(e)(this)}Observable_1.Observable.prototype.sampleTime=sampleTime_2$1.sampleTime;var scan_3=scan$1,scan_2$1={scan:scan_3};Observable_1.Observable.prototype.scan=scan_2$1.scan;var __extends$94=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sequenceEqual(e,t){return function(r){return r.lift(new SequenceEqualOperator(e,t))}}var sequenceEqual_2=sequenceEqual,SequenceEqualOperator=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new SequenceEqualSubscriber(e,this.compareTo,this.comparor))},e}(),SequenceEqualOperator_1=SequenceEqualOperator,SequenceEqualSubscriber=function(e){function t(t,r,n){e.call(this,t),this.compareTo=r,this.comparor=n,this._a=[],this._b=[],this._oneComplete=!1,this.add(r.subscribe(new SequenceEqualCompareToSubscriber(t,this)))}return __extends$94(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,r=this.comparor;e.length>0&&t.length>0;){var n=e.shift(),o=t.shift(),i=!1;r?(i=tryCatch_1.tryCatch(r)(n,o))===errorObject.errorObject&&this.destination.error(errorObject.errorObject.e):i=n===o,i||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(Subscriber_1.Subscriber),SequenceEqualSubscriber_1=SequenceEqualSubscriber,SequenceEqualCompareToSubscriber=function(e){function t(t,r){e.call(this,t),this.parent=r}return __extends$94(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(Subscriber_1.Subscriber),sequenceEqual_1={sequenceEqual:sequenceEqual_2,SequenceEqualOperator:SequenceEqualOperator_1,SequenceEqualSubscriber:SequenceEqualSubscriber_1};function sequenceEqual$1(e,t){return sequenceEqual_1.sequenceEqual(e,t)(this)}var sequenceEqual_3=sequenceEqual$1,sequenceEqual_2$1={sequenceEqual:sequenceEqual_3};function shareSubjectFactory(){return new Subject_1.Subject}function share(){return function(e){return refCount_1.refCount()(multicast_1.multicast(shareSubjectFactory)(e))}}Observable_1.Observable.prototype.sequenceEqual=sequenceEqual_2$1.sequenceEqual;var share_2=share,share_1={share:share_2};function share$1(){return share_1.share()(this)}var share_3=share$1,share_2$1={share:share_3};function shareReplay(e,t,r){return function(n){return n.lift(shareReplayOperator(e,t,r))}}Observable_1.Observable.prototype.share=share_2$1.share;var shareReplay_2=shareReplay;function shareReplayOperator(e,t,r){var n,o,i=0,s=!1,c=!1;return function(a){i++,n&&!s||(s=!1,n=new ReplaySubject_1.ReplaySubject(e,t,r),o=a.subscribe({next:function(e){n.next(e)},error:function(e){s=!0,n.error(e)},complete:function(){c=!0,n.complete()}}));var u=n.subscribe(this);return function(){i--,u.unsubscribe(),o&&0===i&&c&&o.unsubscribe()}}}var shareReplay_1={shareReplay:shareReplay_2};function shareReplay$1(e,t,r){return shareReplay_1.shareReplay(e,t,r)(this)}var shareReplay_3=shareReplay$1,shareReplay_2$1={shareReplay:shareReplay_3};Observable_1.Observable.prototype.shareReplay=shareReplay_2$1.shareReplay;var __extends$95=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function single(e){return function(t){return t.lift(new SingleOperator(e,t))}}var single_2=single,SingleOperator=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new SingleSubscriber(e,this.predicate,this.source))},e}(),SingleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.seenValue=!1,this.index=0}return __extends$95(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new EmptyError_1.EmptyError)},t}(Subscriber_1.Subscriber),single_1={single:single_2};function single$1(e){return single_1.single(e)(this)}var single_3=single$1,single_2$1={single:single_3};Observable_1.Observable.prototype.single=single_2$1.single;var __extends$96=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skip(e){return function(t){return t.lift(new SkipOperator(e))}}var skip_2=skip,SkipOperator=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipSubscriber(e,this.total))},e}(),SkipSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return __extends$96(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(Subscriber_1.Subscriber),skip_1={skip:skip_2};function skip$1(e){return skip_1.skip(e)(this)}var skip_3=skip$1,skip_2$1={skip:skip_3};Observable_1.Observable.prototype.skip=skip_2$1.skip;var __extends$97=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipLast(e){return function(t){return t.lift(new SkipLastOperator(e))}}var skipLast_2=skipLast,SkipLastOperator=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new Subscriber_1.Subscriber(e)):t.subscribe(new SkipLastSubscriber(e,this._skipCount))},e}(),SkipLastSubscriber=function(e){function t(t,r){e.call(this,t),this._skipCount=r,this._count=0,this._ring=new Array(r)}return __extends$97(t,e),t.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,o=this._ring,i=o[n];o[n]=e,this.destination.next(i)}},t}(Subscriber_1.Subscriber),skipLast_1={skipLast:skipLast_2};function skipLast$1(e){return skipLast_1.skipLast(e)(this)}var skipLast_3=skipLast$1,skipLast_2$1={skipLast:skipLast_3};Observable_1.Observable.prototype.skipLast=skipLast_2$1.skipLast;var __extends$98=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipUntil(e){return function(t){return t.lift(new SkipUntilOperator(e))}}var skipUntil_2=skipUntil,SkipUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipUntilSubscriber(e,this.notifier))},e}(),SkipUntilSubscriber=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$98(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,o){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(OuterSubscriber_1.OuterSubscriber),skipUntil_1={skipUntil:skipUntil_2};function skipUntil$1(e){return skipUntil_1.skipUntil(e)(this)}var skipUntil_3=skipUntil$1,skipUntil_2$1={skipUntil:skipUntil_3};Observable_1.Observable.prototype.skipUntil=skipUntil_2$1.skipUntil;var __extends$99=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipWhile(e){return function(t){return t.lift(new SkipWhileOperator(e))}}var skipWhile_2=skipWhile,SkipWhileOperator=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipWhileSubscriber(e,this.predicate))},e}(),SkipWhileSubscriber=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return __extends$99(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(Subscriber_1.Subscriber),skipWhile_1={skipWhile:skipWhile_2};function skipWhile$1(e){return skipWhile_1.skipWhile(e)(this)}var skipWhile_3=skipWhile$1,skipWhile_2$1={skipWhile:skipWhile_3};function startWith(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r=e[e.length-1];isScheduler_1.isScheduler(r)?e.pop():r=null;var n=e.length;return 1===n?concat_1.concat(new ScalarObservable_1.ScalarObservable(e[0],r),t):n>1?concat_1.concat(new ArrayObservable_1.ArrayObservable(e,r),t):concat_1.concat(new EmptyObservable_1.EmptyObservable(r),t)}}Observable_1.Observable.prototype.skipWhile=skipWhile_2$1.skipWhile;var startWith_2=startWith,startWith_1={startWith:startWith_2};function startWith$1(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return startWith_1.startWith.apply(void 0,e)(this)}var startWith_3=startWith$1,startWith_2$1={startWith:startWith_3};Observable_1.Observable.prototype.startWith=startWith_2$1.startWith;var ImmediateDefinition=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=function e(){var t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return n.handler=e,n.args=t,n},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",r=function r(n){var o=r.instance;n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o.runIfPresent(+n.data.slice(t.length))};r.instance=this,e.addEventListener("message",r,!1);var n=function e(){var t=e.messagePrefix,r=e.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(t+n,"*"),n};return n.instance=this,n.messagePrefix=t,n},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var r=t.data;e.runIfPresent(r)};var r=function e(){var t=e.channel,r=e.instance.addFromSetImmediateArguments(arguments);return t.port2.postMessage(r),r};return r.channel=t,r.instance=this,r},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,r=t.root.document,n=r.documentElement,o=t.addFromSetImmediateArguments(arguments),i=r.createElement("script");return i.onreadystatechange=function(){t.runIfPresent(o),i.onreadystatechange=null,n.removeChild(i),i=null},n.appendChild(i),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return e.instance=this,e},e}(),ImmediateDefinition_1=ImmediateDefinition,Immediate_1=new ImmediateDefinition(root.root),Immediate={ImmediateDefinition:ImmediateDefinition_1,Immediate:Immediate_1},__extends$100=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsapAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$100(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(Immediate.Immediate.clearImmediate(r),t.scheduled=void 0)},t}(AsyncAction_1.AsyncAction),AsapAction_2=AsapAction,AsapAction_1={AsapAction:AsapAction_2},__extends$101=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsapScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$101(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,o=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<o&&(e=r.shift()));if(this.active=!1,t){for(;++n<o&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler_1.AsyncScheduler),AsapScheduler_2=AsapScheduler,AsapScheduler_1={AsapScheduler:AsapScheduler_2},asap_1=new AsapScheduler_1.AsapScheduler(AsapAction_1.AsapAction),asap={asap:asap_1},__extends$102=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubscribeOnObservable=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=asap.asap),e.call(this),this.source=t,this.delayTime=r,this.scheduler=n,(!isNumeric_1.isNumeric(r)||r<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=asap.asap)}return __extends$102(t,e),t.create=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=asap.asap),new t(e,r,n)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},t.prototype._subscribe=function(e){var r=this.delayTime,n=this.source;return this.scheduler.schedule(t.dispatch,r,{source:n,subscriber:e})},t}(Observable_1.Observable),SubscribeOnObservable_2=SubscribeOnObservable,SubscribeOnObservable_1={SubscribeOnObservable:SubscribeOnObservable_2};function subscribeOn(e,t){return void 0===t&&(t=0),function(r){return r.lift(new SubscribeOnOperator(e,t))}}var subscribeOn_2=subscribeOn,SubscribeOnOperator=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new SubscribeOnObservable_1.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}(),subscribeOn_1={subscribeOn:subscribeOn_2};function subscribeOn$1(e,t){return void 0===t&&(t=0),subscribeOn_1.subscribeOn(e,t)(this)}var subscribeOn_3=subscribeOn$1,subscribeOn_2$1={subscribeOn:subscribeOn_3};Observable_1.Observable.prototype.subscribeOn=subscribeOn_2$1.subscribeOn;var __extends$103=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function switchMap(e,t){return function(r){return r.lift(new SwitchMapOperator(e,t))}}var switchMap_2=switchMap,SwitchMapOperator=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapSubscriber(e,this.project,this.resultSelector))},e}(),SwitchMapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.index=0}return __extends$103(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,o){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,n){var o;try{o=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(o)},t}(OuterSubscriber_1.OuterSubscriber),switchMap_1={switchMap:switchMap_2};function switchAll(){return switchMap_1.switchMap(identity_1.identity)}var switchAll_2=switchAll,switchAll_1={switchAll:switchAll_2};function _switch(){return switchAll_1.switchAll()(this)}var _switch_2=_switch,_switch_1={_switch:_switch_2};function switchMap$1(e,t){return switchMap_1.switchMap(e,t)(this)}Observable_1.Observable.prototype.switch=_switch_1._switch,Observable_1.Observable.prototype._switch=_switch_1._switch;var switchMap_3=switchMap$1,switchMap_2$1={switchMap:switchMap_3};Observable_1.Observable.prototype.switchMap=switchMap_2$1.switchMap;var __extends$104=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function switchMapTo(e,t){return function(r){return r.lift(new SwitchMapToOperator(e,t))}}var switchMapTo_2=switchMapTo,SwitchMapToOperator=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapToSubscriber(e,this.observable,this.resultSelector))},e}(),SwitchMapToSubscriber=function(e){function t(t,r,n){e.call(this,t),this.inner=r,this.resultSelector=n,this.index=0}return __extends$104(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.resultSelector,s=this.destination;i?this.tryResultSelector(e,t,r,n):s.next(t)},t.prototype.tryResultSelector=function(e,t,r,n){var o,i=this.resultSelector,s=this.destination;try{o=i(e,t,r,n)}catch(e){return void s.error(e)}s.next(o)},t}(OuterSubscriber_1.OuterSubscriber),switchMapTo_1={switchMapTo:switchMapTo_2};function switchMapTo$1(e,t){return switchMapTo_1.switchMapTo(e,t)(this)}var switchMapTo_3=switchMapTo$1,switchMapTo_2$1={switchMapTo:switchMapTo_3};Observable_1.Observable.prototype.switchMapTo=switchMapTo_2$1.switchMapTo;var __extends$105=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function take(e){return function(t){return 0===e?new EmptyObservable_1.EmptyObservable:t.lift(new TakeOperator(e))}}var take_2=take,TakeOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeSubscriber(e,this.total))},e}(),TakeSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return __extends$105(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(Subscriber_1.Subscriber),take_1={take:take_2};function take$1(e){return take_1.take(e)(this)}var take_3=take$1,take_2$1={take:take_3};function takeLast$1(e){return takeLast_1.takeLast(e)(this)}Observable_1.Observable.prototype.take=take_2$1.take;var takeLast_3=takeLast$1,takeLast_2$1={takeLast:takeLast_3};Observable_1.Observable.prototype.takeLast=takeLast_2$1.takeLast;var __extends$106=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeUntil(e){return function(t){return t.lift(new TakeUntilOperator(e))}}var takeUntil_2=takeUntil,TakeUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new TakeUntilSubscriber(e,this.notifier))},e}(),TakeUntilSubscriber=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$106(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.complete()},t.prototype.notifyComplete=function(){},t}(OuterSubscriber_1.OuterSubscriber),takeUntil_1={takeUntil:takeUntil_2};function takeUntil$1(e){return takeUntil_1.takeUntil(e)(this)}var takeUntil_3=takeUntil$1,takeUntil_2$1={takeUntil:takeUntil_3};Observable_1.Observable.prototype.takeUntil=takeUntil_2$1.takeUntil;var __extends$107=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeWhile(e){return function(t){return t.lift(new TakeWhileOperator(e))}}var takeWhile_2=takeWhile,TakeWhileOperator=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new TakeWhileSubscriber(e,this.predicate))},e}(),TakeWhileSubscriber=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return __extends$107(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(Subscriber_1.Subscriber),takeWhile_1={takeWhile:takeWhile_2};function takeWhile$1(e){return takeWhile_1.takeWhile(e)(this)}var takeWhile_3=takeWhile$1,takeWhile_2$1={takeWhile:takeWhile_3};Observable_1.Observable.prototype.takeWhile=takeWhile_2$1.takeWhile;var throttle_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};t.defaultThrottleConfig={leading:!0,trailing:!1},t.throttle=function(e,r){return void 0===r&&(r=t.defaultThrottleConfig),function(t){return t.lift(new n(e,r.leading,r.trailing))}};var n=function(){function e(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.durationSelector,this.leading,this.trailing))},e}(),o=function(e){function t(t,r,n,o){e.call(this,t),this.destination=t,this.durationSelector=r,this._leading=n,this._trailing=o,this._hasTrailingValue=!1}return r(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype._sendTrailing=function(){var e=this,t=e.destination,r=e.throttled,n=e._trailing,o=e._trailingValue,i=e._hasTrailingValue;r&&n&&i&&(t.next(o),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(e,t,r,n,o){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(OuterSubscriber_1.OuterSubscriber)}),throttle_2=throttle_1.defaultThrottleConfig,throttle_3=throttle_1.throttle;function throttle(e,t){return void 0===t&&(t=throttle_1.defaultThrottleConfig),throttle_1.throttle(e,t)(this)}var throttle_3$1=throttle,throttle_2$1={throttle:throttle_3$1};Observable_1.Observable.prototype.throttle=throttle_2$1.throttle;var __extends$108=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function throttleTime(e,t,r){return void 0===t&&(t=async.async),void 0===r&&(r=throttle_1.defaultThrottleConfig),function(n){return n.lift(new ThrottleTimeOperator(e,t,r.leading,r.trailing))}}var throttleTime_2=throttleTime,ThrottleTimeOperator=function(){function e(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new ThrottleTimeSubscriber(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),ThrottleTimeSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.duration=r,this.scheduler=n,this.leading=o,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return __extends$108(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext$4,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Subscriber_1.Subscriber);function dispatchNext$4(e){e.subscriber.clearThrottle()}var throttleTime_1={throttleTime:throttleTime_2};function throttleTime$1(e,t,r){return void 0===t&&(t=async.async),void 0===r&&(r=throttle_1.defaultThrottleConfig),throttleTime_1.throttleTime(e,t,r)(this)}var throttleTime_3=throttleTime$1,throttleTime_2$1={throttleTime:throttleTime_3};Observable_1.Observable.prototype.throttleTime=throttleTime_2$1.throttleTime;var __extends$109=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeInterval(e){return void 0===e&&(e=async.async),function(t){return t.lift(new TimeIntervalOperator(e))}}var timeInterval_2=timeInterval,TimeInterval=function(){return function(e,t){this.value=e,this.interval=t}}(),TimeInterval_1=TimeInterval,TimeIntervalOperator=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new TimeIntervalSubscriber(e,this.scheduler))},e}(),TimeIntervalSubscriber=function(e){function t(t,r){e.call(this,t),this.scheduler=r,this.lastTime=0,this.lastTime=r.now()}return __extends$109(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new TimeInterval(e,r))},t}(Subscriber_1.Subscriber),timeInterval_1={timeInterval:timeInterval_2,TimeInterval:TimeInterval_1},TimeInterval$1=timeInterval_1.TimeInterval;function timeInterval$1(e){return void 0===e&&(e=async.async),timeInterval_1.timeInterval(e)(this)}var timeInterval_3=timeInterval$1,timeInterval_2$1={TimeInterval:TimeInterval$1,timeInterval:timeInterval_3};Observable_1.Observable.prototype.timeInterval=timeInterval_2$1.timeInterval;var __extends$110=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},TimeoutError=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return __extends$110(t,e),t}(Error),TimeoutError_2=TimeoutError,TimeoutError_1={TimeoutError:TimeoutError_2},__extends$111=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeout(e,t){void 0===t&&(t=async.async);var r=isDate_1.isDate(e),n=r?+e-t.now():Math.abs(e);return function(e){return e.lift(new TimeoutOperator(n,r,t,new TimeoutError_1.TimeoutError))}}var timeout_2=timeout,TimeoutOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutSubscriber(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),TimeoutSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.scheduler=o,this.errorInstance=i,this.action=null,this.scheduleTimeout()}return __extends$111(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(Subscriber_1.Subscriber),timeout_1={timeout:timeout_2};function timeout$1(e,t){return void 0===t&&(t=async.async),timeout_1.timeout(e,t)(this)}var timeout_3=timeout$1,timeout_2$1={timeout:timeout_3};Observable_1.Observable.prototype.timeout=timeout_2$1.timeout;var __extends$112=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeoutWith(e,t,r){return void 0===r&&(r=async.async),function(n){var o=isDate_1.isDate(e),i=o?+e-r.now():Math.abs(e);return n.lift(new TimeoutWithOperator(i,o,t,r))}}var timeoutWith_2=timeoutWith,TimeoutWithOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutWithSubscriber(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),TimeoutWithSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.withObservable=o,this.scheduler=i,this.action=null,this.scheduleTimeout()}return __extends$112(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(subscribeToResult_1.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(OuterSubscriber_1.OuterSubscriber),timeoutWith_1={timeoutWith:timeoutWith_2};function timeoutWith$1(e,t,r){return void 0===r&&(r=async.async),timeoutWith_1.timeoutWith(e,t,r)(this)}var timeoutWith_3=timeoutWith$1,timeoutWith_2$1={timeoutWith:timeoutWith_3};function timestamp(e){return void 0===e&&(e=async.async),map_1.map(function(t){return new Timestamp(t,e.now())})}Observable_1.Observable.prototype.timeoutWith=timeoutWith_2$1.timeoutWith;var timestamp_2=timestamp,Timestamp=function(){return function(e,t){this.value=e,this.timestamp=t}}(),Timestamp_1=Timestamp,timestamp_1={timestamp:timestamp_2,Timestamp:Timestamp_1};function timestamp$1(e){return void 0===e&&(e=async.async),timestamp_1.timestamp(e)(this)}var timestamp_3=timestamp$1,timestamp_2$1={timestamp:timestamp_3};function toArrayReducer(e,t,r){return 0===r?[t]:(e.push(t),e)}function toArray(){return reduce_1.reduce(toArrayReducer,[])}Observable_1.Observable.prototype.timestamp=timestamp_2$1.timestamp;var toArray_2=toArray,toArray_1={toArray:toArray_2};function toArray$1(){return toArray_1.toArray()(this)}var toArray_3=toArray$1,toArray_2$1={toArray:toArray_3};Observable_1.Observable.prototype.toArray=toArray_2$1.toArray;var __extends$113=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function window$1(e){return function(t){return t.lift(new WindowOperator(e))}}var window_2=window$1,WindowOperator=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new WindowSubscriber(e),n=t.subscribe(r);return n.closed||r.add(subscribeToResult_1.subscribeToResult(r,this.windowBoundaries)),n},e}(),WindowSubscriber=function(e){function t(t){e.call(this,t),this.window=new Subject_1.Subject,t.next(this.window)}return __extends$113(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new Subject_1.Subject;t.next(r)},t}(OuterSubscriber_1.OuterSubscriber),window_1={window:window_2};function window$2(e){return window_1.window(e)(this)}var window_3=window$2,window_2$1={window:window_3};Observable_1.Observable.prototype.window=window_2$1.window;var __extends$114=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowCount(e,t){return void 0===t&&(t=0),function(r){return r.lift(new WindowCountOperator(e,t))}}var windowCount_2=windowCount,WindowCountOperator=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new WindowCountSubscriber(e,this.windowSize,this.startWindowEvery))},e}(),WindowCountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.destination=t,this.windowSize=r,this.startWindowEvery=n,this.windows=[new Subject_1.Subject],this.count=0,t.next(this.windows[0])}return __extends$114(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,o=this.windows,i=o.length,s=0;s<i&&!this.closed;s++)o[s].next(e);var c=this.count-n+1;if(c>=0&&c%t==0&&!this.closed&&o.shift().complete(),++this.count%t==0&&!this.closed){var a=new Subject_1.Subject;o.push(a),r.next(a)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(Subscriber_1.Subscriber),windowCount_1={windowCount:windowCount_2};function windowCount$1(e,t){return void 0===t&&(t=0),windowCount_1.windowCount(e,t)(this)}var windowCount_3=windowCount$1,windowCount_2$1={windowCount:windowCount_3};Observable_1.Observable.prototype.windowCount=windowCount_2$1.windowCount;var __extends$115=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowTime(e){var t=async.async,r=null,n=Number.POSITIVE_INFINITY;return isScheduler_1.isScheduler(arguments[3])&&(t=arguments[3]),isScheduler_1.isScheduler(arguments[2])?t=arguments[2]:isNumeric_1.isNumeric(arguments[2])&&(n=arguments[2]),isScheduler_1.isScheduler(arguments[1])?t=arguments[1]:isNumeric_1.isNumeric(arguments[1])&&(r=arguments[1]),function(o){return o.lift(new WindowTimeOperator(e,r,n,t))}}var windowTime_2=windowTime,WindowTimeOperator=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new WindowTimeSubscriber(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),CountedSubject=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return __extends$115(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(Subject_1.Subject),WindowTimeSubscriber=function(e){function t(t,r,n,o,i){e.call(this,t),this.destination=t,this.windowTimeSpan=r,this.windowCreationInterval=n,this.maxWindowSize=o,this.scheduler=i,this.windows=[];var s=this.openWindow();if(null!==n&&n>=0){var c={subscriber:this,window:s,context:null},a={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:i};this.add(i.schedule(dispatchWindowClose,r,c)),this.add(i.schedule(dispatchWindowCreation,n,a))}else{var u={subscriber:this,window:s,windowTimeSpan:r};this.add(i.schedule(dispatchWindowTimeSpanOnly,r,u))}}return __extends$115(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var o=t[n];o.closed||(o.next(e),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new CountedSubject;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(Subscriber_1.Subscriber);function dispatchWindowTimeSpanOnly(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function dispatchWindowCreation(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,o=e.windowCreationInterval,i={action:this,subscription:null},s={subscriber:r,window:r.openWindow(),context:i};i.subscription=n.schedule(dispatchWindowClose,t,s),this.add(i.subscription),this.schedule(e,o)}function dispatchWindowClose(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}var windowTime_1={windowTime:windowTime_2};function windowTime$1(e){var t=async.async,r=null,n=Number.POSITIVE_INFINITY;return isScheduler_1.isScheduler(arguments[3])&&(t=arguments[3]),isScheduler_1.isScheduler(arguments[2])?t=arguments[2]:isNumeric_1.isNumeric(arguments[2])&&(n=arguments[2]),isScheduler_1.isScheduler(arguments[1])?t=arguments[1]:isNumeric_1.isNumeric(arguments[1])&&(r=arguments[1]),windowTime_1.windowTime(e,r,n,t)(this)}var windowTime_3=windowTime$1,windowTime_2$1={windowTime:windowTime_3};Observable_1.Observable.prototype.windowTime=windowTime_2$1.windowTime;var __extends$116=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowToggle(e,t){return function(r){return r.lift(new WindowToggleOperator(e,t))}}var windowToggle_2=windowToggle,WindowToggleOperator=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new WindowToggleSubscriber(e,this.openings,this.closingSelector))},e}(),WindowToggleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=subscribeToResult_1.subscribeToResult(this,r,r))}return __extends$116(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,o=-1;++o<n;){var i=r[o];i.window.error(t),i.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var o=t[n];o.window.complete(),o.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,n,o){if(e===this.openings){var i=this.closingSelector,s=tryCatch_1.tryCatch(i)(t);if(s===errorObject.errorObject)return this.error(errorObject.errorObject.e);var c=new Subject_1.Subject,a=new Subscription_1.Subscription,u={window:c,subscription:a};this.contexts.push(u);var l=subscribeToResult_1.subscribeToResult(this,s,u);l.closed?this.closeWindow(this.contexts.length-1):(l.context=u,a.add(l)),this.destination.next(c)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,o=r.subscription;t.splice(e,1),n.complete(),o.unsubscribe()}},t}(OuterSubscriber_1.OuterSubscriber),windowToggle_1={windowToggle:windowToggle_2};function windowToggle$1(e,t){return windowToggle_1.windowToggle(e,t)(this)}var windowToggle_3=windowToggle$1,windowToggle_2$1={windowToggle:windowToggle_3};Observable_1.Observable.prototype.windowToggle=windowToggle_2$1.windowToggle;var __extends$117=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowWhen(e){return function(t){return t.lift(new WindowOperator$1(e))}}var windowWhen_2=windowWhen,WindowOperator$1=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new WindowSubscriber$1(e,this.closingSelector))},e}(),WindowSubscriber$1=function(e){function t(t,r){e.call(this,t),this.destination=t,this.closingSelector=r,this.openWindow()}return __extends$117(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.openWindow(o)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new Subject_1.Subject;this.destination.next(r);var n=tryCatch_1.tryCatch(this.closingSelector)();if(n===errorObject.errorObject){var o=errorObject.errorObject.e;this.destination.error(o),this.window.error(o)}else this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,n))},t}(OuterSubscriber_1.OuterSubscriber),windowWhen_1={windowWhen:windowWhen_2};function windowWhen$1(e){return windowWhen_1.windowWhen(e)(this)}var windowWhen_3=windowWhen$1,windowWhen_2$1={windowWhen:windowWhen_3};Observable_1.Observable.prototype.windowWhen=windowWhen_2$1.windowWhen;var __extends$118=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function withLatestFrom(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r;"function"==typeof e[e.length-1]&&(r=e.pop());var n=e;return t.lift(new WithLatestFromOperator(n,r))}}var withLatestFrom_2=withLatestFrom,WithLatestFromOperator=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new WithLatestFromSubscriber(e,this.observables,this.project))},e}(),WithLatestFromSubscriber=function(e){function t(t,r,n){e.call(this,t),this.observables=r,this.project=n,this.toRespond=[];var o=r.length;this.values=new Array(o);for(var i=0;i<o;i++)this.toRespond.push(i);for(i=0;i<o;i++){var s=r[i];this.add(subscribeToResult_1.subscribeToResult(this,s,s,i))}}return __extends$118(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values[r]=t;var i=this.toRespond;if(i.length>0){var s=i.indexOf(r);-1!==s&&i.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),withLatestFrom_1={withLatestFrom:withLatestFrom_2};function withLatestFrom$1(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return withLatestFrom_1.withLatestFrom.apply(void 0,e)(this)}var withLatestFrom_3=withLatestFrom$1,withLatestFrom_2$1={withLatestFrom:withLatestFrom_3};function zipProto(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return zip_1.zip.apply(void 0,e)(this)}Observable_1.Observable.prototype.withLatestFrom=withLatestFrom_2$1.withLatestFrom;var zipProto_1=zipProto,zip$3={zipProto:zipProto_1};function zipAll(e){return function(t){return t.lift(new zip_1.ZipOperator(e))}}Observable_1.Observable.prototype.zip=zip$3.zipProto;var zipAll_2=zipAll,zipAll_1={zipAll:zipAll_2};function zipAll$1(e){return zipAll_1.zipAll(e)(this)}var zipAll_3=zipAll$1,zipAll_2$1={zipAll:zipAll_3};Observable_1.Observable.prototype.zipAll=zipAll_2$1.zipAll;var SubscriptionLog=function(){return function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}}(),SubscriptionLog_2=SubscriptionLog,SubscriptionLog_1={SubscriptionLog:SubscriptionLog_2},SubscriptionLoggable=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new SubscriptionLog_1.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new SubscriptionLog_1.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}(),SubscriptionLoggable_2=SubscriptionLoggable,SubscriptionLoggable_1={SubscriptionLoggable:SubscriptionLoggable_2};function applyMixins(e,t){for(var r=0,n=t.length;r<n;r++)for(var o=t[r],i=Object.getOwnPropertyNames(o.prototype),s=0,c=i.length;s<c;s++){var a=i[s];e.prototype[a]=o.prototype[a]}}var applyMixins_2=applyMixins,applyMixins_1={applyMixins:applyMixins_2},__extends$119=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ColdObservable=function(e){function t(t,r){e.call(this,function(e){var t=this,r=t.logSubscribedFrame();return e.add(new Subscription_1.Subscription(function(){t.logUnsubscribedFrame(r)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=r}return __extends$119(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;r<t;r++){var n=this.messages[r];e.add(this.scheduler.schedule(function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)},n.frame,{message:n,subscriber:e}))}},t}(Observable_1.Observable),ColdObservable_2=ColdObservable;applyMixins_1.applyMixins(ColdObservable,[SubscriptionLoggable_1.SubscriptionLoggable]);var ColdObservable_1={ColdObservable:ColdObservable_2},__extends$120=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},HotObservable=function(e){function t(t,r){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=r}return __extends$120(t,e),t.prototype._subscribe=function(t){var r=this,n=r.logSubscribedFrame();return t.add(new Subscription_1.Subscription(function(){r.logUnsubscribedFrame(n)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;r<t;r++)!function(){var t=e.messages[r];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(Subject_1.Subject),HotObservable_2=HotObservable;applyMixins_1.applyMixins(HotObservable,[SubscriptionLoggable_1.SubscriptionLoggable]);var HotObservable_1={HotObservable:HotObservable_2},__extends$121=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VirtualTimeScheduler=function(e){function t(t,r){var n=this;void 0===t&&(t=VirtualAction),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t,function(){return n.frame}),this.maxFrames=r,this.frame=0,this.index=-1}return __extends$121(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r.shift())&&(this.frame=t.delay)<=n&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(AsyncScheduler_1.AsyncScheduler),VirtualTimeScheduler_2=VirtualTimeScheduler,VirtualAction=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1),e.call(this,t,r),this.scheduler=t,this.work=r,this.index=n,this.active=!0,this.index=t.index=n}return __extends$121(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var o=new t(this.scheduler,this.work);return this.add(o),o.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(AsyncAction_1.AsyncAction),VirtualAction_1=VirtualAction,VirtualTimeScheduler_1={VirtualTimeScheduler:VirtualTimeScheduler_2,VirtualAction:VirtualAction_1},__extends$122=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},defaultMaxFrame=750,TestScheduler=function(e){function t(t){e.call(this,VirtualTimeScheduler_1.VirtualAction,defaultMaxFrame),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return __extends$122(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,n){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var o=t.parseMarbles(e,r,n),i=new ColdObservable_1.ColdObservable(o,this);return this.coldObservables.push(i),i},t.prototype.createHotObservable=function(e,r,n){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var o=t.parseMarbles(e,r,n),i=new HotObservable_1.HotObservable(o,this);return this.hotObservables.push(i),i},t.prototype.materializeInnerObservable=function(e,t){var r=this,n=[];return e.subscribe(function(e){n.push({frame:r.frame-t,notification:Notification_1.Notification.createNext(e)})},function(e){n.push({frame:r.frame-t,notification:Notification_1.Notification.createError(e)})},function(){n.push({frame:r.frame-t,notification:Notification_1.Notification.createComplete()})}),n},t.prototype.expectObservable=function(e,r){var n=this;void 0===r&&(r=null);var o,i=[],s={actual:i,ready:!1},c=t.parseMarblesAsSubscriptions(r).unsubscribedFrame;return this.schedule(function(){o=e.subscribe(function(e){var t=e;e instanceof Observable_1.Observable&&(t=n.materializeInnerObservable(t,n.frame)),i.push({frame:n.frame,notification:Notification_1.Notification.createNext(t)})},function(e){i.push({frame:n.frame,notification:Notification_1.Notification.createError(e)})},function(){i.push({frame:n.frame,notification:Notification_1.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return o.unsubscribe()},c),this.flushTests.push(s),{toBe:function(e,r,n){s.ready=!0,s.expected=t.parseMarbles(e,r,n,!0)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var n="string"==typeof e?[e]:e;r.ready=!0,r.expected=n.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var r=this.flushTests.filter(function(e){return e.ready});r.length>0;){var n=r.shift();this.assertDeepEqual(n.actual,n.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new SubscriptionLog_1.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,i=0;i<t;i++){var s=i*this.frameTimeFactor,c=e[i];switch(c){case"-":case" ":break;case"(":r=s;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=r>-1?r:s;break;case"!":if(o!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");o=r>-1?r:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+c+"'.")}}return o<0?new SubscriptionLog_1.SubscriptionLog(n):new SubscriptionLog_1.SubscriptionLog(n,o)},t.parseMarbles=function(e,t,r,n){if(void 0===n&&(n=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var o=e.length,i=[],s=e.indexOf("^"),c=-1===s?0:s*-this.frameTimeFactor,a="object"!=typeof t?function(e){return e}:function(e){return n&&t[e]instanceof ColdObservable_1.ColdObservable?t[e].messages:t[e]},u=-1,l=0;l<o;l++){var p=l*this.frameTimeFactor+c,b=void 0,h=e[l];switch(h){case"-":case" ":break;case"(":u=p;break;case")":u=-1;break;case"|":b=Notification_1.Notification.createComplete();break;case"^":break;case"#":b=Notification_1.Notification.createError(r||"error");break;default:b=Notification_1.Notification.createNext(a(h))}b&&i.push({frame:u>-1?u:p,notification:b})}return i},t}(VirtualTimeScheduler_1.VirtualTimeScheduler),RequestAnimationFrameDefinition=function(){return function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}}(),RequestAnimationFrameDefinition_1=RequestAnimationFrameDefinition,AnimationFrame_1=new RequestAnimationFrameDefinition(root.root),AnimationFrame={RequestAnimationFrameDefinition:RequestAnimationFrameDefinition_1,AnimationFrame:AnimationFrame_1},__extends$123=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AnimationFrameAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$123(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=AnimationFrame.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(AnimationFrame.AnimationFrame.cancelAnimationFrame(r),t.scheduled=void 0)},t}(AsyncAction_1.AsyncAction),AnimationFrameAction_2=AnimationFrameAction,AnimationFrameAction_1={AnimationFrameAction:AnimationFrameAction_2},__extends$124=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AnimationFrameScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$124(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,o=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<o&&(e=r.shift()));if(this.active=!1,t){for(;++n<o&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler_1.AsyncScheduler),AnimationFrameScheduler_2=AnimationFrameScheduler,AnimationFrameScheduler_1={AnimationFrameScheduler:AnimationFrameScheduler_2},animationFrame_1=new AnimationFrameScheduler_1.AnimationFrameScheduler(AnimationFrameAction_1.AnimationFrameAction),throttle$2=throttle_1.throttle,Subject$1=Subject_1.Subject,Symbol$1={rxSubscriber:rxSubscriber.rxSubscriber,observable:observable.observable,iterator:iterator.iterator},handlers={};function getHandlers(e){return handlers[e]=handlers[e]||{},handlers[e]}function getHandler(e,t){return handlers[e]=handlers[e]||{},handlers[e][t]=handlers[e][t]||new Subject$1||xs.create(),adapt_3(handlers[e][t])}var Eventable=function(e){function t(t){var r,n=e.call(this,t)||this;n.incorporateHandlers=function(e){var t=getHandlers(e);return Object.keys(t).reduce(function(e,r){var n,o="on"+r[0].toUpperCase()+r.slice(1);return __assign({},e,((n={})[o]=function(e){try{t[r].next(e)}catch(n){t[r].shamefullySendNext(e)}},n))},{})},r=t.scope?t.selector+"_"+t.scope:t.selector;var o=n.incorporateHandlers(r);n._elementType=t._elementType;var i=__assign({},t,o);return delete i._elementType,n.mappedProps=i,n}return __extends(t,e),t.prototype.render=function(){return React.createElement(this._elementType,this.mappedProps,this.props.children)},t}(React.Component),_a=React.createContext(null),Provider=_a.Provider,Consumer=_a.Consumer,ScopeConsumer=function(e){return React.createElement(Consumer,null,function(t){return React.createElement(Eventable,__assign({scope:t},e))})};function h(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(void 0===t&&void 0===r)return hCP(e,{},[]);if(void 0===r&&("string"==typeof t||Array.isArray(t)))return hC(e,t);if(void 0===r&&"object"==typeof t&&!Array.isArray(t))return hP(e,t);if(void 0===t||"string"==typeof t||Array.isArray(t)||void 0===r)throw new Error("Unexpected usage of h() function");return hCP(e,t,r)}function hP(e,t){return internalH(e,t,[])}function hC(e,t){return internalH(e,{},t)}function hCP(e,t,r){return internalH(e,t,r)}function internalH(e,t,r){var n=(new Array).concat(r),o=t?__assign({},t):null;if(o&&(o.selector=o.className),(t=o)&&t.selector){var i=__assign({},t,{_elementType:e});return React__default.createElement.apply(React__default,[ScopeConsumer,i].concat(n))}return React__default.createElement.apply(React__default,[e,t].concat(n))}function createTagFunction(e){return function(t,r){if(void 0!==r){if("function"==typeof r||"number"==typeof r||"string"==typeof r)return h(e,t,r);if(Array.isArray(r))return h.apply(void 0,[e,t].concat(r))}else{if("function"==typeof t||"number"==typeof t||"string"==typeof t)return h(e,{},t);if(Array.isArray(t))return h.apply(void 0,[e,{}].concat(t))}throw new Error("incorrect use of "+e+" helper")}}var TAG_NAMES=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],exported={createTagFunction:createTagFunction,TAG_NAMES:TAG_NAMES};TAG_NAMES.forEach(function(e){exported[e]=createTagFunction(e)});var DocumentDOMSource=function(){function e(){}return e.prototype.select=function(e){return this},e.prototype.events=function(e){return xs.create({next:null,start:function(t){this.next=function(e){t.next(e)},document.addEventListener(e,this.next)},stop:function(){document.removeEventListener(e,this.next)}})},e}(),MainReactSource=function(){function e(e,t){this.scope=t,this.selector=e||""}return e.prototype.getNamespacedSelector=function(){return this.scope?this.selector+"_"+this.scope:this.selector},e.prototype.select=function(t){return"document"===t?new DocumentDOMSource:new e(t,this.scope)},e.prototype.events=function(e){return this.selector.length?getHandler(this.getNamespacedSelector(),e):xs.empty()},e.prototype.isolateSource=function(t,r){return new e(this.selector,r)},e.prototype.isolateSink=function(e,t){return e.map(function(e){return React.createElement(Provider,{value:t},e)})},e}();function makeReactDriver(e){var t;return t="string"==typeof e?document.querySelector(e):e,function(e){return e.addListener({next:function(e){reactDom.render(e,t)}}),new MainReactSource}}var MockedReactSource=function(){function e(e){this.mockConfig=e}return e.prototype.select=function(t){return new e(this.mockConfig[t]||{})},e.prototype.events=function(e){return this.mockConfig[e]||xs.empty()},e}();function mockReactSource(e){return new MockedReactSource(e)}var a=exported.a,abbr=exported.abbr,address=exported.address,area=exported.area,article=exported.article,aside=exported.aside,audio=exported.audio,b=exported.b,base=exported.base,bdi=exported.bdi,bdo=exported.bdo,blockquote=exported.blockquote,body=exported.body,br=exported.br,button=exported.button,canvas=exported.canvas,caption=exported.caption,cite=exported.cite,code=exported.code,col=exported.col,colgroup=exported.colgroup,dd=exported.dd,del=exported.del,dfn=exported.dfn,dir=exported.dir,div=exported.div,dl=exported.dl,dt=exported.dt,em=exported.em,embed=exported.embed,fieldset=exported.fieldset,figcaption=exported.figcaption,figure=exported.figure,footer=exported.footer,form=exported.form,h1=exported.h1,h2=exported.h2,h3=exported.h3,h4=exported.h4,h5=exported.h5,h6=exported.h6,head=exported.head,header=exported.header,hgroup=exported.hgroup,hr=exported.hr,html=exported.html,i=exported.i,iframe=exported.iframe,img=exported.img,input=exported.input,ins=exported.ins,kbd=exported.kbd,keygen=exported.keygen,label=exported.label,legend=exported.legend,li=exported.li,link=exported.link,main=exported.main,map$4=exported.map,mark=exported.mark,menu=exported.menu,meta=exported.meta,nav=exported.nav,noscript=exported.noscript,object=exported.object,ol=exported.ol,optgroup=exported.optgroup,option=exported.option,p=exported.p,param=exported.param,pre=exported.pre,progress=exported.progress,q=exported.q,rp=exported.rp,rt=exported.rt,ruby=exported.ruby,s=exported.s,samp=exported.samp,script=exported.script,section=exported.section,select=exported.select,small=exported.small,source=exported.source,span=exported.span,strong=exported.strong,style=exported.style,sub=exported.sub,sup=exported.sup,table=exported.table,tbody=exported.tbody,td=exported.td,textarea=exported.textarea,tfoot=exported.tfoot,th=exported.th,thead=exported.thead,title=exported.title,tr=exported.tr,u=exported.u,ul=exported.ul,video=exported.video;exports.a=a,exports.abbr=abbr,exports.address=address,exports.area=area,exports.article=article,exports.aside=aside,exports.audio=audio,exports.b=b,exports.base=base,exports.bdi=bdi,exports.bdo=bdo,exports.blockquote=blockquote,exports.body=body,exports.br=br,exports.button=button,exports.canvas=canvas,exports.caption=caption,exports.cite=cite,exports.code=code,exports.col=col,exports.colgroup=colgroup,exports.dd=dd,exports.del=del,exports.dfn=dfn,exports.dir=dir,exports.div=div,exports.dl=dl,exports.dt=dt,exports.em=em,exports.embed=embed,exports.fieldset=fieldset,exports.figcaption=figcaption,exports.figure=figure,exports.footer=footer,exports.form=form,exports.h1=h1,exports.h2=h2,exports.h3=h3,exports.h4=h4,exports.h5=h5,exports.h6=h6,exports.head=head,exports.header=header,exports.hgroup=hgroup,exports.hr=hr,exports.html=html,exports.i=i,exports.iframe=iframe,exports.img=img,exports.input=input,exports.ins=ins,exports.kbd=kbd,exports.keygen=keygen,exports.label=label,exports.legend=legend,exports.li=li,exports.link=link,exports.main=main,exports.map=map$4,exports.mark=mark,exports.menu=menu,exports.meta=meta,exports.nav=nav,exports.noscript=noscript,exports.object=object,exports.ol=ol,exports.optgroup=optgroup,exports.option=option,exports.p=p,exports.param=param,exports.pre=pre,exports.progress=progress,exports.q=q,exports.rp=rp,exports.rt=rt,exports.ruby=ruby,exports.s=s,exports.samp=samp,exports.script=script,exports.section=section,exports.select=select,exports.small=small,exports.source=source,exports.span=span,exports.strong=strong,exports.style=style,exports.sub=sub,exports.sup=sup,exports.table=table,exports.tbody=tbody,exports.td=td,exports.textarea=textarea,exports.tfoot=tfoot,exports.th=th,exports.thead=thead,exports.title=title,exports.tr=tr,exports.u=u,exports.ul=ul,exports.video=video,exports.makeReactDriver=makeReactDriver,exports.mockReactSource=mockReactSource,exports.MockedReactSource=MockedReactSource,exports.h=h;
